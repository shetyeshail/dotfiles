function m(f,g){function c(){document.getElementById("_dydlg_frame_").contentWindow.postMessage({cmd:"init",task:f,dlg_opts:g},"*")}g=g||{fontSize:bg_settings.get("font_size"),taskDef:bg_settings.a()};var a=document.getElementById("_dydlg_frame_");if(a)c(),document.getElementById("_dydlg_wrap_").style.display="";else{var b=document.getElementById("_dydlg_wrap_");b||(b=document.createElement("div"),b.id="_dydlg_wrap_",b.style.cssText="display:none;position:fixed;margin:0;bottom:0;left:0;right:0;top:0;\r\n                  opacity:1;-webkit-transition: opacity 0.2s;overflow: hidden;z-index: 9999;cursor: default;",
document.body.appendChild(b));var e=chrome.extension.getURL("com/taskdlg.htm")+"?native=0&page_title="+encodeURIComponent(document.title),a=document.createElement("iframe");a.id="_dydlg_frame_";a.style.cssText="overflow:hidden;height:100%;width:100%;position:absolute;top:0;left:0;right:0;bottom:0;";a.scrolling="no";a.frameBorder="0";a.width="100%";a.height="100%";a.onload=c;a.src=e;b.appendChild(a);b.style.display="";console.log("dlg injected")}}
window.addEventListener("message",function(f){"close_dlg"==f.data.cmd&&(document.getElementById("_dydlg_wrap_").style.display="none",window.focus(),document.activeElement&&document.activeElement.blur())},!1);(function(){var f=150,g=150;document.body.addEventListener("mousedown",function(a){if(1==a.which||3==a.which)g=a.clientY,f=a.clientX},!0);var c=[];chrome.runtime.onMessage.addListener(function(a,b,e){function k(a){a.target.classList.contains("danim_icon")&&"opacity"==a.propertyName&&a.target.parentNode.removeChild(a.target)}function n(a){var b=f-24,c=g-24;a=chrome.extension.getURL(a?"icons/newd_pause.png":"icons/newd.png");var d=document.createElement("div");d.className="danim_icon";d.style.cssText=
"position:fixed;opacity:1;width:48px;height:48px;z-index:9999;\r\n        left:"+b+"px;top:"+c+'px;background-image:url("'+a+'");background-size:contain;\r\n        transition: opacity 500ms ease-out,transform 700ms ease-out';document.body.appendChild(d);d.addEventListener("transitionend",k);d.addEventListener("webkitTransitionEnd",k);window.getComputedStyle(d).opacity;window.getComputedStyle(d).transform;d.style.opacity="0";d.style.transform="scale(1.5)"}switch(a.cmd){case "g_links":b=[];e={};for(var h=
0,p=c.length;h<p;++h){var l=c[h].url;void 0==e[l]&&(b.push(c[h]),e[l]=1)}0<b.length&&chrome.runtime.sendMessage({cmd:"add_links",data:b});break;case "stream_url":a.url&&(b={url:a.url,size:a.size},b.desc=a.desc||document.title,a.fext&&(b.fext=a.fext),c.push(b),a.need_send&&chrome.runtime.sendMessage({cmd:"add_links",data:[b]}));break;case "d_one":chrome.runtime.sendMessage({cmd:"dlg_options"},function(b){m(a.task,b||{})});e("y");break;case "g_title":e(document.title);break;case "d_anim":n(a.addpause)}})})();
