SiteLaunchObserver=function(t){function a(){this.acc=null,this.launchedSite=!1,this.formSubmitted=!1,this.userInteraction=!1,this.hasFormWithPassword=!1,this.formData=null,this.formDisappeared=!1,this.timeout=null,this.timedout=!1}var e={},i=!1;function r(t,a){t(g_launch_site_tracking_enabled)}function o(t,a){u(t,a,15),e[t].launchedSite=!0,D(e[t].acc,"Launched")}function n(t,a){u(t,a,15),D(e[t].acc,"Filled")}function u(t,i,r){e[t]&&!e[t].launchedSite&&(clearTimeout(e[t].timeout),delete e[t]),e[t]=new a,e[t].acc=i,e[t].timeout=setTimeout(function(){var a=e[t];a&&(a.formSubmitted?(a.formDisappeared=!0,c(t,"Form disappeared")):(a.timedout=!0,c(t,"Timeout")))},1e3*r)}function c(a,i){var r=e[a];r&&(r.launchedSite?t("SiteLaunchAttempt",{URL:r.acc.url,DOMAIN:r.acc.tld,FORM_FOUND:r.hasFormWithPassword,FORM_SUBMITTED:r.formSubmitted,USER_SUBMIT:r.userInteraction,FORM_DISAPPEARED:r.formDisappeared,TIMEDOUT:r.timedout}):t("infield_login_attempt",{url:r.acc.url,domain:r.acc.tld,form_found:r.hasFormWithPassword,form_submitted:r.formSubmitted,form_disappeared:r.formDisappeared,timedout:r.timedout}),m(r),clearTimeout(r.timeout),delete e[a])}function m(t){t.hasFormWithPassword=!!t.formData||t.hasFormWithPassword,D(t.acc," Tracking Results:"),D(t.acc," FormFound: "+t.hasFormWithPassword),D(t.acc," FormSubmitted: "+t.formSubmitted),D(t.acc," FormDisappeared: "+t.formDisappeared),D(t.acc," UserInteraction: "+t.userInteraction),D(t.acc," TimedOut: "+t.timedout)}function s(t,a){for(var e=0;e<a.length;e++)for(var i in a[e])if(a[e][i]===t[i]&&a[e].hasOwnProperty(i)&&""!=a[e][i])return!0;return!1}function d(t,a){if(e[a.tabID]){e[a.tabID].formData=t,e[a.tabID].formSubmitted=!0,e[a.tabID].userInteraction=t.userSubmit,h(a);var i=t.id?t.id:t.name;D(e[a.tabID].acc,"Form("+i+") submitted.")}}function f(t,a){t(e[a.tabID]&&e[a.tabID].formSubmitted)}function h(t){var a=e[t.tabID],i;a&&LPTabs.get({tabID:t.tabID}).forEachWindow({each:function(e,i){return e.LaunchTracking.formExists(a.formData,function(a){a&&c(t.tabID,"Form still on page!")})}})}function l(t){var a=e[t.tabID];a&&a.formSubmitted&&h(t)}function b(t){e[t.tabID]&&(e[t.tabID].hasFormWithPassword=!0,D(e[t.tabID].acc,"Form with password input found"))}function D(t,a){i&&console.log("%cApp: "+t.name+"%c "+a,"color: white; background: green","color: blue")}return{isFeatureEnabled:r,startLaunchSite:o,startFillTracking:n,formSubmitted:d,getSubmitState:f,initiateFormExists:l,hasFormWithPassword:b}}(sendLpImprove);
//# sourceMappingURL=sourcemaps/SiteLaunchObserver/siteLaunchObserverBG.js.map
