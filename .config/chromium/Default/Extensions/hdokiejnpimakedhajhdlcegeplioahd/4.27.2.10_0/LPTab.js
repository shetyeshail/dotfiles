LPTab=function(){var t=function(t,n,e,i){this.loadedContexts={},this.data=e,this.instance=n,this.tab=t,this.disconnect=i};return t.prototype.extendInstance=function(t){t&&t.context&&!this.loadedContexts.hasOwnProperty(t.context)&&(Interfaces.createInstance(Interfaces[this.tab.tabDetails.interfaceName],{instance:this.instance,direct:!1,context:t.context,requestFunction:this.data.contentScriptRequester}),this.loadedContexts[t.context]=!0)},t.prototype.getFrameID=function(){return this.data.frameID},t.prototype.isTop=function(){return this.data.topWindow},t.prototype.getInstance=function(){return this.instance},t.prototype.disconnect=function(){this.disconnect()},function(n){var e=null,i={},a=new LPEventManager,o=0,s=null;this.tabDetails=n,this.getTop=function(){return e?e.instance:null},this.extendTop=function(t){e.extendInstance(t)};var r=function(){clearTimeout(s),c()>=o?a.publishEvent("framesloaded"):s=setTimeout(function(){a.publishEvent("framesloaded")},1e3)};this.addFrame=function(n,a,s){var c=new t(this,n,a,s);c.isTop()?e=c:i[c.getFrameID()]=c,o+=a.childFrameCount,r()},this.removeFrame=function(t){i[t]?(delete i[t],--o):e&&e.getFrameID()===t&&(e=null)},this.getFrames=function(){var t={};for(var n in i)t[n]=this.getFrame(n);return t},this.extendFrames=function(t){for(var n in i)i[n].extendInstance(t)},this.getFrame=function(t){var n=null;return i[t]?n=i[t]:e&&e.getFrameID()===t&&(n=e),n?n.getInstance():null};var c=function(){return Object.keys(i).length};this.isEmpty=function(){return null===e&&0===c()};var u=function(t,n){var e=Object.keys(t).length,i=0,a=function(){++i===e&&n.done()};for(var o in t)n.each(t[o],a)||--e;0===e&&n.done&&n.done()};this.forEachFrame=function(t){u(this.getFrames(),t)},this.forEachWindow=function(t){var n=this.getFrames(),e=this.getTop();e&&(n[0]=e),u(n,t)},this.activate=function(){LPPlatform.activateTab({tabID:this.tabDetails.tabID,windowID:this.tabDetails.windowID})},this.close=function(){LPPlatform.closeTab({tabID:this.tabDetails.tabID,windowID:this.tabDetails.windowID})},this.onFramesLoaded=function(t){a.addEventListenerOnce("framesloaded",t),setTimeout(r,1e3)},this.disconnect=function(){for(var t in e&&(e.disconnect(),e=null),i)i[t].disconnect();i=null}}}();
//# sourceMappingURL=sourcemaps/LPTab.js.map
