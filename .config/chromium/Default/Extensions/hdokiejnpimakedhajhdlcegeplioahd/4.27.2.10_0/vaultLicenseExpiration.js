VaultLicenseExpiration=function(i){var e,s,r,t,n,a=function(s,r,n){var a=$(i.body),d,l,p,g,m=document.getElementById("expirationContainer"),c=document.getElementById("expirationText"),x=document.getElementById("expirationUpgradeButton"),u=document.getElementById("expirationLearnMore"),_=document.getElementById("expirationDismiss"),v="1"==sessionStorage.getItem("hideTierExpiredDialog")&&e&&void 0!==t&&!t;switch(s){case Constants.USER_ENTERPRISE_ADMIN:n<1&&void 0!==n&&!v&&E()?"trial"===r?(dialogs.vaultTierExpiredDialog.open({which:"EnterpriseTrialExpired"}),sessionStorage.setItem("hideTierExpiredDialog","1")):(dialogs.vaultTierExpiredDialog.open({which:"EnterpriseLicenseExpired"}),sessionStorage.setItem("hideTierExpiredDialog","1")):"trial"===r&&void 0!==n&&n<=7&&n>=1&&(c.innerText=Strings.translateString("Your LastPass Enterprise trial expires in "+n+" days."),d="trial_expiring_upgrade_enterprise",l="trial_expiring_learn_more_enterprise",p="dismiss_enterprise_trial_expiring",g="dismissedEnterpriseTrialExpiring",a.addClass("expiringNotification"),m.classList.add("isVisible"),x.addEventListener("click",function(){bg.sendLpImprove(d),bg.openEnterprisePaymentPage()}),u.addEventListener("click",function(){bg.sendLpImprove(l),bg.openPricingPage()}),_.addEventListener("click",function(){bg.sendLpImprove(p),m.classList.remove("isVisible"),a.removeClass("expiringNotification"),o(g,1)}));break;case Constants.USER_TEAMS_ADMIN:n<1&&void 0!==n&&!v&&E()?"trial"===r?(dialogs.vaultTierExpiredDialog.open({which:"TeamsTrialExpired"}),sessionStorage.setItem("hideTierExpiredDialog","1")):(dialogs.vaultTierExpiredDialog.open({which:"TeamsLicenseExpired"}),sessionStorage.setItem("hideTierExpiredDialog","1")):"trial"===r&&void 0!==n&&n<=7&&n>=1&&(c.innerText=Strings.translateString("Your LastPass Teams trial expires in "+n+" days."),d="trial_expiring_upgrade_teams",l="trial_expiring_learn_more_teams",p="dismiss_teams_trial_expiring",g="dismissedTeamsTrialExpiring",a.addClass("expiringNotification"),m.classList.add("isVisible"),x.addEventListener("click",function(){bg.sendLpImprove(d),bg.openTeamsPaymentPage()}),u.addEventListener("click",function(){bg.sendLpImprove(l),bg.openPricingPage()}),_.addEventListener("click",function(){bg.sendLpImprove(p),m.classList.remove("isVisible"),a.removeClass("expiringNotification"),o(g,1)}));break;case Constants.USER_FAMILY_ADMIN:n<1&&void 0!==n&&!v&&E()?"trial"===r?(dialogs.vaultTierExpiredDialog.open({which:"FamiliesTrialExpired"}),sessionStorage.setItem("hideTierExpiredDialog","1")):(dialogs.vaultTierExpiredDialog.open({which:"FamiliesLicenseExpired"}),sessionStorage.setItem("hideTierExpiredDialog","1")):"trial"===r&&void 0!==n&&n<=7&&n>=1&&(c.innerText=Strings.translateString("Your LastPass Families trial expires in "+n+" days."),d="trial_expiring_upgrade_families",l="trial_expiring_learn_more_families",p="dismiss_families_trial_expiring",g="dismissedFamiliesTrialExpiring",a.addClass("expiringNotification"),m.classList.add("isVisible"),x.addEventListener("click",function(){bg.sendLpImprove(d),bg.openFamiliesPaymentPage()}),u.addEventListener("click",function(){bg.sendLpImprove(l),bg.openPricingPage()}),_.addEventListener("click",function(){bg.sendLpImprove(p),m.classList.remove("isVisible"),a.removeClass("expiringNotification"),o(g,1)}));break;case Constants.USER_PREMIUM_TRIAL:"trial"===r&&void 0!==n&&n<=7&&n>=1&&(c.innerText=Strings.translateString("Your LastPass Premium trial expires in "+n+" days."),d="trial_expiring_upgrade_premium",l="trial_expiring_learn_more_premium",p="dismiss_premium_trial_expiring",g="dismissedPremiumTrialExpiring",a.addClass("expiringNotification"),m.classList.add("isVisible"),x.addEventListener("click",function(){bg.sendLpImprove(d),bg.openPremiumPaymentPage()}),u.addEventListener("click",function(){bg.sendLpImprove(l),bg.openPricingPage()}),_.addEventListener("click",function(){bg.sendLpImprove(p),m.classList.remove("isVisible"),a.removeClass("expiringNotification"),o(g,1)}));break;case Constants.USER_FREE:void 0!==n&&n>-30&&!v&&("trial"===r?(dialogs.vaultTierExpiredDialog.open({which:"PremiumTrialExpired"}),sessionStorage.setItem("hideTierExpiredDialog","1")):(dialogs.vaultTierExpiredDialog.open({which:"PremiumLicenseExpired"}),sessionStorage.setItem("hideTierExpiredDialog","1")))}},o=function(i,e){var s=JSON.parse(sessionStorage.getItem("expirationData"));null===s?((s={})[i]=e,sessionStorage.setItem("expirationData",JSON.stringify(s))):(s[i]=e,sessionStorage.setItem("expirationData",JSON.stringify(s)))},d=function(i,e,s){var r=JSON.parse(sessionStorage.getItem("expirationData"));return null!==r&&(1===r[i]||1===r[e]||1===r[s])},l=function(i,e,s){var r=JSON.parse(localStorage.getItem("expiredData"));return null!==r&&(1===r[i]||1===r[e]||1===r[s])},p,g,m,c,E=function(){return!d("dismissedEnterpriseExpiring","dismissedTeamsExpiring","dismissedFamiliesExpiring")&&!l("dismissedEnterpriseExpired","dismissedTeamsExpired","dismissedFamiliesExpired")};return{initialize:function(){e=bg.get("LPContentScriptFeatures").show_trial_expiration,r=LPProxy.getAccountClass(),t=bg.get("g_hasplugin"),(Constants.USER_PREMIUM_TRIAL||Constants.USER_PREMIUM_TRIAL)&&(s=bg.get("g_premium_trial_exp_days"))},removeStoredLocalStoreExpPrefs:function(i){var e;i>360&&(null!==JSON.parse(localStorage.getItem("expiredData"))&&localStorage.removeItem("expiredData"))},showExpiration:a,premiumTrialExpiringStatusChecker:function(){return e&&s<=7&&s>=1&&r===Constants.USER_PREMIUM_TRIAL&&r!==Constants.USER_FREE&&!d("dismissedPremiumTrialExpiring")&&void 0!==t&&!t},premiumTrialExpiredStatusChecker:function(){return e&&s<1&&s>-31&&(r===Constants.USER_PREMIUM_TRIAL||r===Constants.USER_FREE)&&!d("dismissedPremiumTrialExpired")&&void 0!==t&&!t},companyLicenseStatusChecker:function(){return e&&void 0!==t&&!t&&r!==Constants.USER_PREMIUM_TRIAL&&r!==Constants.USER_FREE}}}(document);
//# sourceMappingURL=sourcemaps/vaultLicenseExpiration.js.map
