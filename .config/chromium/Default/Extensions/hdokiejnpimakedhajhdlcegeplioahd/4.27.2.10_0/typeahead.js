!function(t){var e={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){if(!(i=n.call(null,r,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){if(i=n.call(null,r,t,e))return!1}),!!i):i},mixin:t.extend,getUniqueId:(n=0,function(){return n++}),templatify:function e(n){return t.isFunction(n)?n:i;function i(){return String(n)}},defer:function(t){setTimeout(function(){t()},0)},debounce:function(t,e,n){var i,r;return function(){var s=this,o=arguments,u,a;return u=function(){i=null,n||(r=t.apply(s,o))},a=n&&!i,clearTimeout(i),i=setTimeout(function(){u()},e),a&&(r=t.apply(s,o)),r}},throttle:function(t,e){var n,i,r,s,o,u;return o=0,u=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var a=new Date,h=e-(a-o);return n=this,i=arguments,h<=0?(clearTimeout(r),r=null,o=a,s=t.apply(n,i)):r||(r=setTimeout(function(){u()},h)),s}},noop:function(){}},n,i="0.10.1",r=function(t,n){function i(t){this.maxSize=t||100,this.size=0,this.hash={},this.list=new r}function r(){this.head=this.tail=null}function s(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function t(e,n){var i=this.list.tail,r;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(r=this.hash[e])?(r.val=n,this.list.moveToFront(r)):(r=new s(e,n),this.list.add(r),this.hash[e]=r,this.size++)},get:function t(e){var n=this.hash[e];if(n)return this.list.moveToFront(n),n.val}}),e.mixin(r.prototype,{add:function t(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function t(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(this),s=function(){var t,n;try{(t=window.localStorage).setItem("~~~","!"),t.removeItem("~~~")}catch(e){t=null}function i(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}return n=t&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),o(t.getItem(this._prefix(e)))},set:function(n,i,o){return e.isNumber(o)?t.setItem(this._ttlKey(n),s(r()+o)):t.removeItem(this._ttlKey(n)),t.setItem(this._prefix(n),s(i))},remove:function(e){return t.removeItem(this._ttlKey(e)),t.removeItem(this._prefix(e)),this},clear:function(){var e,n,i=[],r=t.length;for(e=0;e<r;e++)(n=t.key(e)).match(this.keyMatcher)&&i.push(n.replace(this.keyMatcher,""));for(e=i.length;e--;)this.remove(i[e]);return this},isExpired:function(n){var i=o(t.getItem(this._ttlKey(n)));return!!(e.isNumber(i)&&r()>i)}}:{get:e.noop,set:e.noop,remove:e.noop,clear:e.noop,isExpired:e.noop},e.mixin(i.prototype,n),i;function r(){return(new Date).getTime()}function s(t){return JSON.stringify(e.isUndefined(t)?null:t)}function o(t){return JSON.parse(t)}}(),o=function(){var n=0,i={},s=6,o=new r(10);function u(e){e=e||{},this._send=e.transport?a(e.transport):t.ajax,this._get=e.rateLimiter?e.rateLimiter(this._get):this._get}return u.setMaxPendingRequests=function t(e){s=e},u.resetCache=function t(){o=new r(10)},e.mixin(u.prototype,{_get:function(t,e,r){var u=this,a;function h(e){r&&r(e),o.set(t,e)}function c(){n--,delete i[t],u.onDeckRequestArgs&&(u._get.apply(u,u.onDeckRequestArgs),u.onDeckRequestArgs=null)}(a=i[t])?a.done(h):n<s?(n++,i[t]=this._send(t,e).done(h).always(c)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(t,n,i){var r=this,s;return e.isFunction(n)&&(i=n,n={}),(s=o.get(t))?e.defer(function(){i&&i(s)}):this._get(t,n,i),!!s}}),u;function a(n){return function i(r,s){var o=t.Deferred();return n(r,s,u,a),o;function u(t){e.defer(function(){o.resolve(t)})}function a(t){e.defer(function(){o.reject(t)})}}}}(),u=function(){function n(e){(e=e||{}).datumTokenizer&&e.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.datums=[],this.trie={ids:[],children:{}}}return e.mixin(n.prototype,{bootstrap:function t(e){this.datums=e.datums,this.trie=e.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var r,s;r=n.datums.push(t)-1,s=i(n.datumTokenizer(t)),e.each(s,function(t){var e,i,s,o;for(e=n.trie,i=t.split("");s=i.shift();)(e=e.children[s]||(e.children[s]={ids:[],children:{}})).ids.push(r)})})},get:function t(n){var r=this,u,a;return u=i(this.queryTokenizer(n)),e.each(u,function(t){var e,n,i,s;if(a&&0===a.length)return!1;for(e=r.trie,n=t.split("");e&&(i=n.shift());)e=e.children[i];if(!e||0!==n.length)return a=[],!1;s=e.ids.slice(0),a=a?o(a,s):s}),a?e.map(s(a),function(t){return r.datums[t]}):[]},serialize:function t(){return{datums:this.datums,trie:this.trie}}}),n;function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){return{ids:[],children:{}}}function s(t){for(var e={},n=[],i=0;i<t.length;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function o(t,e){var n=0,i=0,r=[];for(t=t.sort(s),e=e.sort(s);n<t.length&&i<e.length;)t[n]<e[i]?n++:t[n]>e[i]?i++:(r.push(t[n]),n++,i++);return r;function s(t,e){return t-e}}}(),a=function(){return{local:n,prefetch:r,remote:s};function n(t){var n=t.local||null;return e.isFunction(n)&&(n=n.call(null)),n}function r(n){var r,s;return s={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(r=n.prefetch||null)&&(r=e.isString(r)?{url:r}:r,(r=e.mixin(s,r)).thumbprint=i+r.thumbprint,r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",!r.url&&t.error("prefetch requires url to be set")),r}function s(n){var i,r;return r={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(i=n.remote||null)&&(i=e.isString(i)?{url:i}:i,(i=e.mixin(r,i)).rateLimiter=/^throttle$/i.test(i.rateLimitBy)?o(i.rateLimitWait):s(i.rateLimitWait),i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",delete i.rateLimitBy,delete i.rateLimitWait,!i.url&&t.error("remote requires url to be set")),i;function s(t){return function(n){return e.debounce(n,t)}}function o(t){return function(n){return e.throttle(n,t)}}}}(),h=window.Bloodhound=function(){var n;function i(e){e&&(e.local||e.prefetch||e.remote)||t.error("one of local, prefetch, or remote is required"),this.limit=e.limit||5,this.sorter=r(e.sorter),this.dupDetector=e.dupDetector||h,this.local=a.local(e),this.prefetch=a.prefetch(e),this.remote=a.remote(e),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new u({datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),this.storage=this.cacheKey?new s(this.cacheKey):null}return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},i.tokenizers={whitespace:function t(e){return e.split(/\s+/)},nonword:function t(e){return e.split(/\W+/)}},e.mixin(i.prototype,{_loadPrefetch:function e(n){var i=this,r,s;return(r=this._readFromStorage(n.thumbprint))?(this.index.bootstrap(r),s=t.Deferred().resolve()):s=t.ajax(n.url,n.ajax).done(o),s;function o(t){var e;e=n.filter?n.filter(t):t,i.add(e),i._saveToStorage(i.index.serialize(),n.thumbprint,n.ttl)}},_getFromRemote:function t(e,n){var i=this,r,s;return e=e||"",s=encodeURIComponent(e),r=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,s),"function"==typeof shouldSearchGroups&&shouldSearchGroups()&&(r+="&grp=1"),"function"==typeof shouldSearchNoFriends&&shouldSearchNoFriends()&&(r+="&nofriends=1"),this.transport.get(r,this.remote.ajax,o);function o(t){var e=i.remote.filter?i.remote.filter(t):t;n(e)}},_saveToStorage:function t(e,i,r){this.storage&&(this.storage.set(n.data,e,r),this.storage.set(n.protocol,location.protocol,r),this.storage.set(n.thumbprint,i,r))},_readFromStorage:function t(e){var i={},r;return this.storage&&(i.data=this.storage.get(n.data),i.protocol=this.storage.get(n.protocol),i.thumbprint=this.storage.get(n.thumbprint)),r=i.thumbprint!==e||i.protocol!==location.protocol,i.data&&!r?i.data:null},initialize:function e(){var n=this,i;return i=this.prefetch?this._loadPrefetch(this.prefetch):t.Deferred().resolve(),this.local&&i.done(r),this.transport=this.remote?new o(this.remote):null,this.initialize=function t(){return i.promise()},i.promise();function r(){n.add(n.local)}},add:function t(e){this.index.add(e)},get:function t(n,i){var r=this,s,o=!1;function u(t){var n=s.slice(0);e.each(t,function(t){var i;return!(i=e.some(n,function(e){return r.dupDetector(t,e)}))&&n.push(t),n.length<r.limit}),i&&i(r.sorter(n))}s=this.index.get(n),(s=this.sorter(s).slice(0,this.limit)).length<this.limit&&this.transport&&(o=this._getFromRemote(n,u)),!o&&i&&i(s)},ttAdapter:function t(){return e.bind(this.get,this)}}),i;function r(t){return e.isFunction(t)?n:i;function n(e){return e.sort(t)}function i(t){return t}}function h(){return!1}}(),c={wrapper:'<span class="twitter-typeahead" style="width:100%"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion">%BODY%</div>'},l={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};e.isMsie()&&e.mixin(l.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e.isMsie()&&e.isMsie()<=7&&e.mixin(l.input,{marginTop:"-1px"});var d=function(){var n="typeahead:";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}return e.mixin(i.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(n+t,e)}}),i}(),p=function(){var t=/\s+/,e=a();return{onSync:r,onAsync:i,off:s,trigger:o};function n(e,n,i,r){var s;if(!i)return this;for(n=n.split(t),i=r?h(i,r):i,this._callbacks=this._callbacks||{};s=n.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][e].push(i);return this}function i(t,e,i){return n.call(this,"async",t,e,i)}function r(t,e,i){return n.call(this,"sync",t,e,i)}function s(e){var n;if(!this._callbacks)return this;for(e=e.split(t);n=e.shift();)delete this._callbacks[n];return this}function o(n){var i=this,r,s,o,a,h;if(!this._callbacks)return this;for(n=n.split(t),o=[].slice.call(arguments,1);(r=n.shift())&&(s=this._callbacks[r]);)a=u(s.sync,this,[r].concat(o)),h=u(s.async,this,[r].concat(o)),a()&&e(h);return this}function u(t,e,n){return i;function i(){for(var i,r=0;!i&&r<t.length;r+=1)i=!1===t[r].apply(e,n);return!i}}function a(){var t,e;return t=window.setImmediate?function t(e){setImmediate(function(){e()})}:function t(e){setTimeout(function(){e()},0)}}function h(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}}(),f=function(t){var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function r(s){var o;function u(e){var n,i;return(n=o.exec(e.data))&&(wrapperNode=t.createElement(s.tagName),s.className&&(wrapperNode.className=s.className),(i=e.splitText(n.index)).splitText(n[0].length),wrapperNode.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(wrapperNode,i)),!!n}function a(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++){if(3===(n=t.childNodes[r]).nodeType){e(n);break}a(n,e)}}(s=e.mixin({},n,s)).node&&s.pattern&&(s.pattern=e.isArray(s.pattern)?s.pattern:[s.pattern],o=i(s.pattern,s.caseSensitive,s.wordsOnly),a(s.node,u))};function i(t,n,i){for(var r=[],s,o=0;o<t.length;o++)r.push(e.escapeRegExChars(t[o]));return s=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(s):new RegExp(s,"i")}}(window.document),g=function(){var n;function i(i){var s=this,o,u,a,h;(i=i||{}).input||t.error("input is missing"),o=e.bind(this._onBlur,this),u=e.bind(this._onFocus,this),a=e.bind(this._onKeydown,this),h=e.bind(this._onInput,this),this.$hint=t(i.hint),this.$input=t(i.input).on("blur.tt",o).on("focus.tt",u).on("keydown.tt",a),0===this.$hint.length&&(this.setHintValue=this.getHintValue=this.clearHint=e.noop),e.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){n[t.which||t.keyCode]||e.defer(e.bind(s._onInput,s,t))}):this.$input.on("input.tt",h),this.query=this.$input.val(),this.$overflowHelper=r(this.$input)}return n={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,p,{_onBlur:function t(e){this.resetInputValue(),this.trigger("blurred")},_onFocus:function t(e){this.trigger("focused")},_onKeydown:function t(e){var i=n[e.which||e.keyCode];this._managePreventDefault(i,e),i&&this._shouldTrigger(i,e)&&this.trigger(i+"Keyed",e)},_onInput:function t(e){this._checkInputValue()},_managePreventDefault:function t(e,n){var i,r,s;switch(e){case"tab":r=this.getHintValue(),s=this.getInputValue(),i=r&&r!==s&&!o(n);break;case"up":case"down":i=!o(n);break;default:i=!1}i&&n.preventDefault()},_shouldTrigger:function t(e,n){var i;switch(e){case"tab":i=!o(n);break;default:i=!0}return i},_checkInputValue:function t(){var e,n,i;i=!!(n=s(e=this.getInputValue(),this.query))&&this.query.length!==e.length,n?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=e)},focus:function t(){this.$input.focus()},blur:function t(){this.$input.blur()},getQuery:function t(){return this.query},setQuery:function t(e){this.query=e},getInputValue:function t(){return this.$input.val()},setInputValue:function t(e,n){this.$input.val(e),!n&&this._checkInputValue()},getHintValue:function t(){return this.$hint.val()},setHintValue:function t(e){this.$hint.val(e)},resetInputValue:function t(){this.$input.val(this.query)},clearHint:function t(){this.$hint.val("")},getLanguageDirection:function t(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function t(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:!document.selection||((i=document.selection.createRange()).moveStart("character",-t),t===i.text.length)},destroy:function t(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),i;function r(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"nowrap",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function s(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}}(),m=function(){var n="ttDataset",i="ttValue",r="ttDatum";function s(n){(n=n||{}).templates=n.templates||{},n.source||t.error("missing source"),n.name&&!a(n.name)&&t.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||e.getUniqueId(),this.source=n.source,this.displayFn=o(n.display||n.displayKey),this.templates=u(n.templates,this.displayFn),this.$el=t(c.dataset.replace("%CLASS%",this.name))}return s.extractDatasetName=function e(i){return t(i).data(n)},s.extractValue=function e(n){return t(n).data(i)},s.extractDatum=function e(n){return t(n).data(r)},e.mixin(s.prototype,p,{_render:function s(o,u){if(this.$el){var a=this,h;this.$el.empty(),!(h=u&&u.length)&&this.templates.empty?this.$el.html(d()).prepend(a.templates.header?g():null).append(a.templates.footer?m():null):h&&this.$el.html(p()).prepend(a.templates.header?g():null).append(a.templates.footer?m():null),this.trigger("rendered")}function d(){return a.templates.empty({query:o,isEmpty:!0})}function p(){var s,h;return s=t(c.suggestions).css(l.suggestions),h=e.map(u,d),s.append.apply(s,h),a.highlight&&f({node:s[0],pattern:o}),s;function d(e){var s,o,u;return o=a.templates.suggestion(e),u=c.suggestion.replace("%BODY%",o),(s=t(u).data(n,a.name).data(i,a.displayFn(e)).data(r,e)).children().each(function(){t(this).css(l.suggestionChild)}),s}}function g(){return a.templates.header({query:o,isEmpty:!h})}function m(){return a.templates.footer({query:o,isEmpty:!h})}},getRoot:function t(){return this.$el},update:function t(e){var n=this;function i(t){e===n.query&&n._render(e,t)}this.query=e,this.source(e,i)},clear:function t(){this._render(this.query||"")},isEmpty:function t(){return this.$el.is(":empty")},destroy:function t(){this.$el=null}}),s;function o(t){return t=t||"value",e.isFunction(t)?t:n;function n(e){return e[t]}}function u(t,n){return{empty:t.empty&&e.templatify(t.empty),header:t.header&&e.templatify(t.header),footer:t.footer&&e.templatify(t.footer),suggestion:t.suggestion||i};function i(t){return"<p>"+n(t)+"</p>"}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}}(),y=function(){function n(n){var r=this,s,o,u;(n=n||{}).menu||t.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=e.map(n.datasets,i),s=e.bind(this._onSuggestionClick,this),o=e.bind(this._onSuggestionMouseEnter,this),u=e.bind(this._onSuggestionMouseLeave,this),this.$menu=t(n.menu).on("click.tt",".tt-suggestion",s).on("mouseenter.tt",".tt-suggestion",o).on("mouseleave.tt",".tt-suggestion",u),e.each(this.datasets,function(t){r.$menu.append(t.getRoot()),t.onSync("rendered",r._onRendered,r)})}return e.mixin(n.prototype,p,{_onSuggestionClick:function e(n){this.trigger("suggestionClicked",t(n.currentTarget))},_onSuggestionMouseEnter:function e(n){this._removeCursor(),this._setCursor(t(n.currentTarget),!0)},_onSuggestionMouseLeave:function t(e){this._removeCursor()},_onRendered:function t(){function n(t){return t.isEmpty()}this.isEmpty=e.every(this.datasets,n),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function t(){return this.$menu.find(".tt-suggestion")},_getCursor:function t(){return this.$menu.find(".tt-cursor").first()},_setCursor:function t(e,n){e.first().addClass("tt-cursor"),!n&&this.trigger("cursorMoved")},_removeCursor:function t(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function t(e){var n,i,r,s;this.isOpen&&(i=this._getCursor(),n=this._getSuggestions(),this._removeCursor(),-1!==(r=((r=n.index(i)+e)+1)%(n.length+1)-1)?(r<-1&&(r=n.length-1),this._setCursor(s=n.eq(r)),this._ensureVisible(s)):this.trigger("cursorRemoved"))},_ensureVisible:function t(e){var n,i,r,s;i=(n=e.position().top)+e.outerHeight(!0),r=this.$menu.scrollTop(),s=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),n<0?this.$menu.scrollTop(r+n):s<i&&this.$menu.scrollTop(r+(i-s))},close:function t(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function t(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function t(e){this.$menu.css("ltr"===e?l.ltr:l.rtl)},moveCursorUp:function t(){this._moveCursor(-1)},moveCursorDown:function t(){this._moveCursor(1)},getDatumForSuggestion:function t(e){var n=null;return e.length&&(n={raw:m.extractDatum(e),value:m.extractValue(e),datasetName:m.extractDatasetName(e)}),n},getDatumForCursor:function t(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function t(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function t(n){function i(t){t.update(n)}e.each(this.datasets,i)},empty:function t(){function n(t){t.clear()}e.each(this.datasets,n),this.isEmpty=!0},isVisible:function t(){return this.isOpen&&!this.isEmpty},destroy:function t(){function n(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,e.each(this.datasets,n)}}),n;function i(t){return new m(t)}}(),v=function(){var n="ttAttrs";function i(n){var i,s,o,u;(n=n||{}).input||t.error("missing input"),this.autoselect=!!n.autoselect,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.$node=r(n.input,n.withHint),i=this.$node.find(".tt-dropdown-menu"),s=this.$node.find(".tt-input"),o=this.$node.find(".tt-hint"),this.eventBus=n.eventBus||new d({el:s}),this.dropdown=new y({menu:i,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new g({input:s,hint:o}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),i.on("mousedown.tt",function(t){e.isMsie()&&e.isMsie()<9&&(s[0].onbeforedeactivate=function(){window.event.returnValue=!1,s[0].onbeforedeactivate=null}),t.preventDefault()})}return e.mixin(i.prototype,{_onSuggestionClicked:function t(e,n){var i;(i=this.dropdown.getDatumForSuggestion(n))&&this._select(i)},_onCursorMoved:function t(){var e=this.dropdown.getDatumForCursor();this.input.clearHint(),this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function t(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function t(){this._updateHint()},_onOpened:function t(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function t(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function t(){this.dropdown.empty(),this.dropdown.isOpen||0!=this.minLength||this.dropdown.update(""),this.dropdown.open()},_onBlurred:function t(){this.dropdown.close()},_onEnterKeyed:function t(e,n){var i,r;i=this.dropdown.getDatumForCursor(),r=this.dropdown.getDatumForTopSuggestion(),i?(this._select(i),n.preventDefault()):this.autoselect&&r&&(this._select(r),n.preventDefault())},_onTabKeyed:function t(e,n){var i;(i=this.dropdown.getDatumForCursor())?(this._select(i),n.preventDefault()):this._autocomplete()},_onEscKeyed:function t(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function t(){var e=this.input.getQuery();!this.dropdown.isOpen&&e.length>=this.minLength&&this.dropdown.update(e),this.dropdown.open(),this.dropdown.moveCursorUp()},_onDownKeyed:function t(){var e=this.input.getQuery();!this.dropdown.isOpen&&e.length>=this.minLength&&this.dropdown.update(e),this.dropdown.open(),this.dropdown.moveCursorDown()},_onLeftKeyed:function t(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function t(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function t(e,n){this.input.clearHint(),this.dropdown.empty(),n.length>=this.minLength&&this.dropdown.update(n),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function t(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function t(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function t(){var n,i,r,s,o,u;if((n=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()){i=this.input.getInputValue(),r=g.normalizeQuery(i),s=e.escapeRegExChars(r);var a=n.value,h;new RegExp("/^http[s]?:/").exec(s)||(a=""!==n.raw.a?n.raw.a:n.raw.domain),u=(o=new RegExp("^(?:"+s+")(.*$)","i")).exec(a),this.input.setHintValue(i+(u?u[1]:""))}},_autocomplete:function t(){var e,n,i;e=this.input.getHintValue(),n=this.input.getQuery(),e&&n!==e&&this.input.isCursorAtEnd()&&((i=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(i.value),this.eventBus.trigger("autocompleted",i.raw,i.datasetName))},_select:function t(n){this.input.clearHint(),this.input.setQuery(n.value),this.input.setInputValue(n.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",n.raw,n.datasetName),this.dropdown.close(),e.defer(e.bind(this.dropdown.empty,this.dropdown))},open:function t(){this.dropdown.open()},close:function t(){this.dropdown.close()},getQuery:function t(){return this.input.getQuery()},setQuery:function t(e){this.input.setInputValue(e)},destroy:function t(){this.input.destroy(),this.dropdown.destroy(),o(this.$node),this.$node=null}}),i;function r(e,i){var r,o,u,a;r=t(e),o=t(c.wrapper).css(l.wrapper),u=t(c.dropdown).css(l.dropdown),(a=r.clone().css(l.hint).css(s(r))).val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),r.data(n,{dir:r.attr("dir"),autocomplete:r.attr("autocomplete"),spellcheck:r.attr("spellcheck"),style:r.attr("style")}),r.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(i?l.input:l.inputWithNoHint);try{!r.attr("dir")&&r.attr("dir","auto")}catch(t){}return r.wrap(o).parent().prepend(i?a:null).append(u)}function s(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function o(t){var i=t.find(".tt-input");e.each(i.data(n),function(t,n){e.isUndefined(t)?i.removeAttr(n):i.attr(n,t)}),i.detach().removeData(n).removeClass("tt-input").insertAfter(t),t.remove()}}(),_,w,b;_=t.fn.typeahead,w="ttTypeahead",b={initialize:function n(i,r){return r=e.isArray(r)?r:[].slice.call(arguments,1),i=i||{},this.each(s);function s(){var n=t(this),s,o;e.each(r,function(t){t.highlight=!!i.highlight}),o=new v({input:n,eventBus:s=new d({el:n}),withHint:!!e.isUndefined(i.hint)||!!i.hint,minLength:i.minLength,autoselect:i.autoselect,datasets:r}),n.data(w,o)}},open:function e(){return this.each(n);function n(){var e,n;(n=t(this).data(w))&&n.open()}},close:function e(){return this.each(n);function n(){var e,n;(n=t(this).data(w))&&n.close()}},val:function e(n){return arguments.length?this.each(i):r(this.first());function i(){var e,i;(i=t(this).data(w))&&i.setQuery(n)}function r(t){var e,n;return(e=t.data(w))&&(n=e.getQuery()),n}},destroy:function e(){return this.each(n);function n(){var e=t(this),n;(n=e.data(w))&&(n.destroy(),e.removeData(w))}}},t.fn.typeahead=function(t){return b[t]?b[t].apply(this,[].slice.call(arguments,1)):b.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function e(){return t.fn.typeahead=_,this}}(window.jQuery);
//# sourceMappingURL=sourcemaps/typeahead.js.map
