Interfaces=function(){var t=function(t,n){this.type=t,this.options=n,this.options&&(this.options.include&&(this.options.include=[].concat(this.options.include)),this.options.exclude&&(this.options.exclude=[].concat(this.options.exclude)))},n=function(t,n){var n=[].concat(n);for(i=0;i<n.length;++i)for(j=0;j<t.length;++j)if(t[j]===n[i])return!0;return!1};t.prototype.requiredBy=function(t){var o;if(t&&this.options){if(this.options.include)return n(this.options.include,t);if(this.options.exclude)return!n(this.options.include,t)}return!0},t.prototype.isSyncronized=function(){return this.options&&!0===this.options.sync},t.prototype.isSyncronousFunction=function(){return this.type===Interfaces.TYPE_SYNC_FUNCTION},t.prototype.isFunction=function(){return this.type===Interfaces.TYPE_FUNCTION||this.type===Interfaces.TYPE_SYNC_FUNCTION},t.prototype.isConstructor=function(){return this.type===Interfaces.TYPE_CONSTRUCTOR},t.prototype.isPrimitive=function(){return!this.isFunction()&&!this.isConstructor()},t.prototype.shouldSendIndirect=function(){return this.isPrimitive()?!this.options||void 0===this.options.sendIndirect||this.options.sendIndirect:this.options&&!0===this.options.sendIndirect},t.prototype.allowWrite=function(){return this.options&&!0===this.options.write},t.prototype.addIncludes=function(t){this.options=this.options||{},this.options.include=this.options.include.concat(t)};var o,e=(r=function(t,n){return function(o){if(n.hasOwnProperty(o))return t[o];throw o+" is not defined in the interface."}},c=function(t,n,o,i){var e=function(n,i,e){if(!n.allowWrite())throw o.concat(i)+" is not writeable.";if(!n||typeof e!==n.type)throw i+" is not defined in the interface.";t[i]=e};return i.direct?function(t,o){var i=n[t];e(i,t,o)}:function(t,r){var c=n[t];e(c,t,r),c.shouldSendIndirect()&&i.requestFunction({cmd:"LPData.setValue",args:[o.concat(t),r]})}},s=function(t,n,o,i){return function(){var e=arguments;if(i.cloneObjects&&!t.isSyncronousFunction()){var r=function(t){return"function"==typeof t?function(){var n=c(Array.from(arguments));t.apply(null,n)}:t},c=function(t){return t?(Array.isArray(t)?(n=[],t.forEach(function(t){"object"==typeof t?n.push(c(t)):n.push(r(t))})):(n={},Object.keys(t).forEach(function(o){t[o]&&"object"==typeof t[o]?n[o]=c(t[o]):n[o]=r(t[o])})),r(n)):null;var n};e=Array.prototype.map.call(e,function(t){return"object"==typeof t?c(t):r(t)})}return o.apply(n,e)}},u=function(t,n,o){if("function"==typeof o.requestFunction)return function(){for(var i=[],e=0,r=arguments.length;e<r;++e)i.push(arguments[e]);return o.requestFunction({cmd:t.length>0?t.concat(n):n,args:i})};throw"requestFunction must be specified for this interface since it is not direct access."},f=function(t,n,o){return function(){"function"==typeof n&&n.apply(t,arguments),"function"==typeof o&&o.apply(t,arguments)}},a=function(n,o,i,e,p,h){var l=!1,y=[];for(var d in e){var v=e[d];v instanceof t?v.isFunction()?!v.requiredBy(h.context)||v.isSyncronousFunction()&&h.asyncOnly||(h.direct||v.isSyncronousFunction()?o&&"function"==typeof o[d]?(n[d]=s(v,o,o[d],h),!h.direct&&v.shouldSendIndirect()&&(n[d]=f(n,n[d],u(p,d,h)))):y.push(v.type+": "+p.concat(d).join(".")):n[d]=u(p,d,h)):v.isConstructor()?v.requiredBy(h.context)&&!h.asyncOnly&&(o&&"function"==typeof o[d]?n[d]=o[d]:y.push(v.type+": "+p.concat(d).join("."))):l=!0:(n.hasOwnProperty(d)||(n[d]={}),a(n[d],o?o[d]:o,i?i[d]:i,e[d],p.concat(d),h))}if(l&&(n.get=r(i,e),n.set=c(i,e,p,h)),y.length>0&&h.checkMissing)throw"Background instance does not support the following:\n"+y.join("\n");return n},function(t,n){return a(n.instance||{},n.source||n.sourceFunctions,n.source||n.sourceData,t,[],n)}),r,c,s,u,f,a,p=(h={},l={},y=function(n,o,i,e){var r=[];for(var c in n){var s=e?e.concat(c):[c],u=n[c];u instanceof t?u.isPrimitive()&&u.requiredBy(o)&&(!i||u.isSyncronized())&&r.push({sourceFunction:u.options&&u.options.sourceFunction,path:s}):r=r.concat(y(u,o,i,s))}return r},function(t,n){var o=[];t=[].concat(t);for(var i=0;i<t.length;++i){var e=t[i],r;n.syncronizedOnly?void 0===(r=l[e])&&(r=l[e]=y(n.interface,e,!0)):void 0===(r=h[e])&&(r=h[e]=y(n.interface,e,!1)),o=o.concat(r)}return o}),h,l,y,d,v;return{TYPE_CONSTRUCTOR:"contsructor",TYPE_SYNC_FUNCTION:"synchronous function",TYPE_FUNCTION:"function",TYPE_STRING:"string",TYPE_BOOLEAN:"boolean",TYPE_NUMBER:"number",TYPE_OBJECT:"object",Definition:t,extend:function(t,n){for(var o in n){var i=n[o];switch(typeof i){case"object":t.hasOwnProperty(o)?Interfaces.extend(t[o],i):t[o]=i;break;default:t[o]=i}}},createInstance:e,getPrimitives:function(t){var n={};if(t.context)for(var o=p(t.context,t),i=0,e=o.length;i<e;++i){var r=o[i],c;c=r.sourceFunction?"function"==typeof r.sourceFunction?r.sourceFunction():LPReflection.callFunction(null,r.sourceFunction,[],{context:t.source}):LPReflection.getValue(t.interface,r.path,{context:t.source}),LPReflection.setValue(null,r.path,c,{context:n})}return n},clearPrimitives:function(t){if(t.context)for(var n=p(t.context,t),o=0;o<n.length;++o)LPReflection.setValue(null,n[o].path,null,{context:t.source})},getName:function(t){for(var n in this)if(t===this[n])return n;throw new Error("Could not find interface name.")}}}();
//# sourceMappingURL=sourcemaps/interfaces.js.map
