/*

 lodash 4.5.1 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 Build: `lodash -o ./dist/lodash.js`
 MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors */
define("qowtRoot/utils/typeUtils",[],function(){function h(a,e,c){if(c.types.every(function(e){var a=g[e];if(!a)throw Error("Bad config to checkArgTypes: unknown type: "+e);return!a(c.value)})){var h=1===c.types.length?c.types[0]:"["+c.types.join(",")+"]";throw Error("Argument "+e+" passed to function "+a+" was supposed to be of type "+h+" but had value "+c.value);}}var c={checkArgTypes:function(a,e){for(var g in e){var c={value:e[g][0],types:e[g].slice(1)};h(a,g,c)}},isObject:function(a){return"object"===
typeof a&&null!==a},isPromise:function(a){return a instanceof Promise},isPromiseLike:function(a){return!(!a||!c.isFunction(a.then))},isList:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isNumber:function(a){return"number"===typeof a&&!isNaN(a)},isInteger:function(a){return"number"===typeof a&&parseInt(a,10)===a},isFunction:function(a){return"function"===typeof a},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},isRegex:function(a){return"[object RegExp]"===
Object.prototype.toString.call(a)},isNode:function(a){return a instanceof Node},isNull:function(a){return null===a},isUndefined:function(a){return void 0===a},isBoolean:function(a){return"boolean"===typeof a},getType:function(a){var e;Object.keys(g).forEach(function(c){g[c](a)&&(e=c)});return e},isArgumentsObjectOrList:function(a){return a instanceof Object&&a.hasOwnProperty("length")},extend:function(a,e){for(var g in e)e.hasOwnProperty(g)&&(a[g]=e[g])},createNewType:function(a){var e=function(){},
c={isOfType:function(a){return void 0!==a&&null!==a&&a.constructor===e},markAsType:function(a){Object.defineProperty(a,"constructor",{value:e,configurable:!1,writable:!1,enumerable:!1});return a}};if(a){if(g[a])throw Error("Already registered type "+a);g[a]=c.isOfType}return c}},g={string:c.isString,object:c.isObject,promise:c.isPromise,promiseLike:c.isPromiseLike,node:c.isNode,regex:c.isRegex,"function":c.isFunction,number:c.isNumber,list:c.isList,boolean:c.isBoolean,"null":c.isNull,undefined:c.isUndefined};
return c});(function(){var h={},c=window.sessionStorage.getItem("featureOverrides");c&&(h=JSON.parse(c));h.isRelease=!0;h.edit=!1;window.sessionStorage.setItem("featureOverrides",JSON.stringify(h));window.localStorage.removeItem("testsToInclude");window.localStorage.removeItem("builtInTests")})();define("configs/releaseFeatures",function(){});
(function(){var h={},c=window.sessionStorage.getItem("featureOverrides");c&&(h=JSON.parse(c));h.save=!!(window.chrome&&window.chrome.fileSystem&&window.chrome.fileSystem.chooseEntry);window.sessionStorage.setItem("featureOverrides",JSON.stringify(h))})();define("configs/chromeFeatures",function(){});define("qowtRoot/features/pack",[],function(){return{edit:!0,save:!1,pointEdit:!1,hats:!0}});
define("qowtRoot/features/utils",["qowtRoot/features/pack"],function(h){var c={isEnabled:function(a){a=h[a];return void 0===a?!1:a},enable:function(a){h[a]=!0},disable:function(a){h[a]=!1},setOverrides:function(a){for(var e in a)a.hasOwnProperty(e)&&(h[e]=a[e])},isDebug:function(){return void 0!==g?g:!c.isEnabled("isRelease")},setDebugOverride:function(a){g=a},clearDebugOverride:function(){g=void 0}},g;return c});
(function(h){h("qowtRoot/third_party/when/lib/timer",["require"],function(c){return{set:setTimeout,clear:clearTimeout}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/lib/timed",[],function(){return function(c,g,a){a.prototype.delay=function(e){var a=this;return new this.constructor(function(g,h,k){a.then(function(a){c(function(){g(a)},e)},h,k)})};a.prototype.timeout=function(a,h){var p=this,r=1<arguments.length;return new this.constructor(function(k,n,t){var w=c(function(){n(r?h:Error("timed out after "+a+"ms"))},a);p.then(function(a){g(w);k(a)},function(a){g(w);n(a)},t)})};return a}})})("function"===typeof define&&define.amd?
define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/array",[],function(){return function(c){var g=Array.prototype.map,a=Array.prototype.reduce,e=Array.prototype.reduceRight,h=Array.prototype.forEach,p=c.resolve,r=c.all;c.any=function(a){return new c(function(e,g){function c(a){A.push(a);0===--r&&g(A)}var r=0,A=[];h.call(a,function(a){++r;p(a).then(e,c)});0===r&&e()})};c.some=function(a,e){return new c(function(g,c,r){function A(a){0<u&&(--u,q.push(a),0===u&&g(q))}function z(a){0<C&&(--C,F.push(a),0===C&&
c(F))}var u=0,C,q=[],F=[];h.call(a,function(a){++u;p(a).then(A,z,r)});e=Math.max(e,0);C=u-e+1;u=Math.min(e,u);0===u&&g(q)})};c.settle=function(a){return r(g.call(a,function(a){function e(){return a.inspect()}a=p(a);return a.then(e,e)}))};c.map=function(a,e,c){return r(g.call(a,function(a){return p(a).then(e,c)}))};c.reduce=function(e,g){function c(a,e,k){return p(a).then(function(a){return p(e).then(function(e){return g(a,e,k)})})}return 2<arguments.length?a.call(e,c,arguments[2]):a.call(e,c)};c.reduceRight=
function(a,g){function c(a,e,k){return p(a).then(function(a){return p(e).then(function(e){return g(a,e,k)})})}return 2<arguments.length?e.call(a,c,arguments[2]):e.call(a,c)};c.prototype.spread=function(a){return this.then(r).then(function(e){return a.apply(void 0,e)})};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/fatal",["require","./timer"],function(c){var g=c("./timer").set;return function(a){g(function(){throw a;},0)}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/lib/flow",["require","./fatal"],function(c){function g(){throw new TypeError("catch predicate must be a function");}function a(a,e){return function(){a.call(this);return e}}function e(){}var h=c("./fatal");return function(c){function r(a,e){return function(c){return(e===Error||null!=e&&e.prototype instanceof Error?c instanceof e:e(c))?a.call(this,c):n(c)}}var k=c.resolve,n=c.reject,t=c.prototype["catch"];c.prototype.done=function(a,c){var g=this._handler;
g.when(this._maybeFatal,e,this,g.receiver,a,c)};c.prototype._maybeFatal=function(a){if(Object(a)===a)k(a)["catch"](this._fatal)};c.prototype._fatal=h;c.prototype["catch"]=c.prototype.otherwise=function(a){return 1===arguments.length?t.call(this,a):"function"!==typeof a?this.ensure(g):t.call(this,r(arguments[1],a))};c.prototype["finally"]=c.prototype.ensure=function(e){if("function"!==typeof e)return this;e=a(e,this);return this.then(e,e)};c.prototype["else"]=c.prototype.orElse=function(a){return this.then(void 0,
function(){return a})};c.prototype.yield=function(a){return this.then(function(){return a})};c.prototype.tap=function(a){return this.then(a).yield(this)};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});(function(h){h("qowtRoot/third_party/when/lib/inspect",[],function(){return function(c){c.prototype.inspect=function(){return this._handler.inspect()};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/iterate",[],function(){return function(c){function g(a,c,h,k){function n(k){return e(h(k)).then(function(){return g(a,c,h,a(k))})}return e(k).then(function(a){return e(c(a)).then(function(e){return e?a:n(a)})})}function a(c,g,h,k){function n(k,n){return e(h(k)).then(function(){return a(c,g,h,n)})}return e(k).then(function(a){return e(g(a)).then(function(g){return g?a:e(c(a)).spread(n)})})}var e=c.resolve;c.iterate=g;c.unfold=a;return c}})})("function"===
typeof define&&define.amd?define:function(h){module.exports=h()});(function(h){h("qowtRoot/third_party/when/lib/progress",[],function(){return function(c){c.prototype.progress=function(c){return this.then(void 0,void 0,c)};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/with",[],function(){return function(c){c.prototype["with"]=c.prototype.withThis=c.prototype._bindContext;return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/makePromise",[],function(){return function(c){function g(e){var c=this;this._handler=new w;a(e,function(a){c._handler.resolve(a)},function(a){c._handler.reject(a)},function(a){c._handler.notify(a)})}function a(a,e,c,g){try{a(e,c,g)}catch(h){c(h)}}function e(a){return new h(new H(new C(a)))}function h(a){this._handler=a}function p(a,e){if(a instanceof g){var c=a._handler.join();return e===c?new C(new TypeError("Promise cycle")):c}return ab(a)?k(a):new u(a)}
function r(a){return a instanceof g?a._handler.join():k(a)}function k(a){try{var e=a.then;return"function"===typeof e?new z(e,a):new u(a)}catch(c){return new C(c)}}function n(){}function t(a){this.handler=a;if(this._isMonitored()){var e=this._env.promiseMonitor.captureStack();this.trace=a._addTrace(e)}}function w(a){this.consumers=[];this.receiver=a;this.handler=void 0;this.resolved=!1;this._isMonitored()&&(this.trace=this._env.promiseMonitor.captureStack())}function H(a){t.call(this,a)}function A(a,
e){t.call(this,a);this.receiver=e}function z(a,e){w.call(this);this.assimilated=!1;this.untrustedThen=a;this.thenable=e}function u(a){this.value=a}function C(a){this.value=a;this.observed=!1;this._isMonitored()&&(this.key=this._env.promiseMonitor.startTrace(a))}function q(){return{state:"pending"}}function F(a,e,c,g,h,k,n,r){this.a=a;this.b=e;this.c=c;this.d=g;this.e=h;this.f=k;this.g=n;this.handler=r}function X(a,e){this.q=a;this.value=e}function ab(a){return("object"===typeof a||"function"===typeof a)&&
null!==a}function Na(a,c,g){try{return a.call(g,c)}catch(h){return e(h)}}function Y(){}var Oa,ya=c.scheduler,ga=Object.create||function(a){function e(){}e.prototype=a;return new e};g.resolve=function(a){return a instanceof g?a:new h(new H(p(a)))};g.reject=e;g.never=function(){return Oa};g._defer=function(){return new h(new w)};g.prototype.then=function(a,e,c){var g=this._handler,k=new w(g.receiver);g.when(k.resolve,k.notify,k,g.receiver,a,e,c);return new h(k)};g.prototype["catch"]=g.prototype.otherwise=
function(a){return this.then(void 0,a)};g.prototype._bindContext=function(a){return new h(new A(this._handler,a))};g.all=function(a){function e(a,c,g,h){g.when(Y,Y,void 0,a,function(a){c[h]=a;0===--k&&this.resolve(c)},a.reject,a.notify)}var c=new w,g=a.length>>>0,k=g,n=[],p,q;for(p=0;p<g;++p)p in a?(q=a[p],ab(q)?e(c,n,r(q),p):(n[p]=q,--k)):--k;0===k&&c.resolve(n);return new h(c)};g.race=function(a){if(Object(a)===a&&0===a.length)return Oa;for(var e=new w,c=0;c<a.length;++c)p(a[c]).when(Y,Y,void 0,
e,e.resolve,e.reject);return new h(e)};h.prototype=ga(g.prototype);n.prototype.inspect=q;n.prototype.when=Y;n.prototype.resolve=Y;n.prototype.reject=Y;n.prototype.notify=Y;n.prototype.join=function(){return this};n.prototype._env=c.monitor||g;n.prototype._addTrace=Y;n.prototype._isMonitored=function(){return"undefined"!==typeof this._env.promiseMonitor};t.prototype=ga(n.prototype);t.prototype.join=function(){return this.handler.join()};t.prototype.inspect=function(){return this.handler.inspect()};
t.prototype._addTrace=function(a){return this.handler._addTrace(a)};w.prototype=ga(n.prototype);w.prototype.inspect=function(){return this.resolved?this.handler.join().inspect():q()};w.prototype.resolve=function(a){this._join(p(a,this))};w.prototype.reject=function(a){this._join(new C(a))};w.prototype.join=function(){return this.resolved?this.handler.join():this};w.prototype.run=function(){var a=this.consumers,e=this.handler=this.handler.join();this.consumers=void 0;for(var c=0;c<a.length;c+=7)e.when(a[c],
a[c+1],a[c+2],a[c+3],a[c+4],a[c+5],a[c+6])};w.prototype._join=function(a){this.resolved||(this.resolved=!0,this.handler=a,ya.enqueue(this),this._isMonitored()&&(this.trace=a._addTrace(this.trace)))};w.prototype.when=function(a,e,c,g,k,h,n){this.resolved?ya.enqueue(new F(a,e,c,g,k,h,n,this.handler.join())):this.consumers.push(a,e,c,g,k,h,n)};w.prototype.notify=function(a){this.resolved||ya.enqueue(new X(this.consumers,a))};w.prototype._addTrace=function(a){return this.resolved?this.handler._addTrace(a):
a};H.prototype=ga(t.prototype);H.prototype.when=function(a,e,c,g,k,h,n){ya.enqueue(new F(a,e,c,g,k,h,n,this.join()))};A.prototype=ga(t.prototype);A.prototype.when=function(a,e,c,g,k,h,n){void 0!==this.receiver&&(g=this.receiver);this.join().when(a,e,c,g,k,h,n)};z.prototype=ga(w.prototype);z.prototype.when=function(a,e,c,g,k,h,n){this.assimilated||(this.assimilated=!0,this._assimilate());w.prototype.when.call(this,a,e,c,g,k,h,n)};z.prototype._assimilate=function(){var a=this;this._try(this.untrustedThen,
this.thenable,function(e){a.resolve(e)},function(e){a.reject(e)},function(e){a.notify(e)})};z.prototype._try=function(a,e,c,g,k){try{a.call(e,c,g,k)}catch(h){g(h)}};u.prototype=ga(n.prototype);u.prototype.inspect=function(){return{state:"fulfilled",value:this.value}};u.prototype.when=function(a,e,c,g,k){e="function"===typeof k?Na(k,this.value,g):this.value;a.call(c,e)};C.prototype=ga(n.prototype);C.prototype.inspect=function(){return{state:"rejected",reason:this.value}};C.prototype.when=function(a,
c,g,k,h,n){this._isMonitored()&&!this.observed&&this._env.promiseMonitor.removeTrace(this.key);this.observed=!0;c="function"===typeof n?Na(n,this.value,k):e(this.value);a.call(g,c)};C.prototype._addTrace=function(a){this.observed||this._env.promiseMonitor.updateTrace(this.key,a)};Oa=new h(new n);F.prototype.run=function(){this.handler.when(this.a,this.b,this.c,this.d,this.e,this.f,this.g)};X.prototype.run=function(){for(var a=this.q,e=1;e<a.length;e+=7)this._notify(a[e],a[e+1],a[e+2],a[e+5])};X.prototype._notify=
function(a,e,c,g){var k;if("function"===typeof g)try{k=g.call(c,this.value)}catch(h){k=h}else k=this.value;a.call(e,k)};return g}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/Queue",[],function(){function c(c){this.head=this.tail=this.length=0;this.buffer=Array(1<<c)}c.prototype.push=function(c){this.length===this.buffer.length&&this._ensureCapacity(2*this.length);this.buffer[this.tail]=c;this.tail=this.tail+1&this.buffer.length-1;++this.length;return this.length};c.prototype.shift=function(){var c=this.buffer[this.head];this.buffer[this.head]=void 0;this.head=this.head+1&this.buffer.length-1;--this.length;return c};c.prototype._ensureCapacity=
function(c){var a=this.head,e=this.buffer,h=Array(c),p=0,r;if(0===a)for(r=this.length;p<r;++p)h[p]=e[p];else{c=e.length;for(r=this.tail;a<c;++p,++a)h[p]=e[a];for(a=0;a<r;++p,++a)h[p]=e[a]}this.buffer=h;this.head=0;this.tail=this.length};return c})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/scheduler",["require","./Queue"],function(c){function g(e){this._enqueue=e;this._handlerQueue=new a(15);var c=this;this.drainQueue=function(){c._drainQueue()}}var a=c("./Queue");g.prototype.enqueue=function(a){1===this._handlerQueue.push(a)&&this._enqueue(this.drainQueue)};g.prototype._drainQueue=function(){for(var a=this._handlerQueue;0<a.length;)a.shift().run()};return g})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/lib/async",["require"],function(c){var g;return"undefined"!==typeof process&&null!==process&&"function"===typeof process.nextTick?function(a){process.nextTick(a)}:(g="function"===typeof MutationObserver&&MutationObserver||"function"===typeof WebKitMutationObserver&&WebKitMutationObserver)?function(a,e){var c,g=a.createElement("div");(new e(function(){var a=c;c=void 0;a()})).observe(g,{attributes:!0});return function(a){c=a;g.setAttribute("class","x")}}(document,
g):function(a){var e=setTimeout;return function(a){e(a,0)}}(c)})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});(function(h){h("qowtRoot/third_party/when/lib/Promise",["require","./makePromise","./scheduler","./async"],function(c){var g=c("./makePromise"),a=c("./scheduler");c=c("./async");return g({scheduler:new a(c),monitor:"undefined"!==typeof console?console:void 0})})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/when","require ./lib/timer ./lib/timed ./lib/array ./lib/flow ./lib/inspect ./lib/iterate ./lib/progress ./lib/with ./lib/Promise".split(" "),function(c){function g(a,e,c,g){var k=C(a);return 2>arguments.length?k:k.then(e,c,g)}function a(a){return function(){return h(a,this,q.call(arguments))}}function e(a){return h(a,this,q.call(arguments,1))}function h(a,e,c){return u.all(c).then(function(c){return a.apply(e,c)})}function p(){function a(e){g._handler.resolve(e)}
function e(a){g._handler.reject(a)}function c(a){g._handler.notify(a)}var g=u._defer();this.promise=g;this.resolve=a;this.reject=e;this.notify=c;this.resolver={resolve:a,reject:e,notify:c}}var r=c("./lib/timer"),k=c("./lib/timed"),n=c("./lib/array"),t=c("./lib/flow"),w=c("./lib/inspect"),H=c("./lib/iterate"),A=c("./lib/progress"),z=c("./lib/with"),u=c("./lib/Promise"),u=[n,t,H,A,w,z].reduceRight(function(a,e){return e(a)},k(r.set,r.clear,u)),C=u.resolve,q=Array.prototype.slice;g.promise=function(a){return new u(a)};
g.resolve=u.resolve;g.reject=u.reject;g.lift=a;g["try"]=e;g.attempt=e;g.iterate=u.iterate;g.unfold=u.unfold;g.join=function(){return u.all(arguments)};g.all=function(a){return g(a,u.all)};g.settle=function(a){return g(a,u.settle)};g.any=a(u.any);g.some=a(u.some);g.map=function(a,e){return g(a,function(a){return u.map(a,e)})};g.reduce=function(a,e){var c=q.call(arguments,1);return g(a,function(a){c.unshift(a);return u.reduce.apply(u,c)})};g.reduceRight=function(a,e){var c=q.call(arguments,1);return g(a,
function(a){c.unshift(a);return u.reduceRight.apply(u,c)})};g.isPromiseLike=function(a){return a&&"function"===typeof a.then};g.Promise=u;g.defer=function(){return new p};return g})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
define("qowtRoot/utils/promiseUtils",["qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when"],function(h,c){var g={cast:function(a){return a instanceof Promise?a:Promise.resolve(a)},delay:function(a,e){a=a||0;return new Promise(function(c){setTimeout(c.bind(void 0,e),a)})},delayThenReject:function(a,e){a=a||0;return new Promise(function(c,g){setTimeout(g.bind(c,e),a)})},throwAndEscapeChain:function(a){a instanceof Error||(console.error("throwAndEscapeChain wrapping value in new Error: ",a),a=
Error(a));c.reject(a).done();throw a;},pipeline:function(a){function e(){for(var p=Array.prototype.slice.call(arguments,0);0<a.length;){var k=a.shift();if(h.isPromiseLike(k))return g.cast(k).then(function(g){a.unshift(g);return e.apply(c,p)});h.checkArgTypes("PromiseUtils.pipeline",{task:[k,"function"]});k=k.apply(c,p);if(h.isPromiseLike(k))return g.cast(k).then(function(a){return e(a)});p=[k]}return p[0]}var c=this,p=Array.prototype.slice.call(arguments,0);if(p.some(h.isPromiseLike))return Promise.all(p).then(function(a){return g.pipeline.apply(c,
a)});h.checkArgTypes("PromiseUtils.pipeline",{tasks:[a,"list"]});a=a.slice(0);return e.apply(c,p.slice(1))},finally:function(a,c){function h(){return g.cast(c()).then(function(){return a})}return g.cast(a).then(h,h)},waitForNextMacroTurn:function(a){return new Promise(function(c){window.setTimeout(c.bind(null,a),0)})}};return g});
define("utils/analytics/googleAnalytics",["qowtRoot/features/utils","qowtRoot/utils/promiseUtils"],function(h,c){function g(c,e){var g;void 0!==u?g=u?Promise.resolve():Promise.reject(Error("ga permission cached (not permitted)")):(window.analytics&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.getIsCrashReportingEnabled&&(!h.isDebug()||void 0!==window.__gaMock)?g=Promise.resolve():(console.warn("GA not supported on this platform"),g=Promise.reject(Error("GA not supported on this platform"))),
g=g.then(a).catch(p));return g.then(r).then(c.bind(null,e)).catch(function(){})}function a(){var a=Error("Crash reporting setting timed out");return Promise.race([e(),c.delayThenReject(1E3,a)]).then(v)}function e(){return new Promise(function(a){chrome.metricsPrivate.getIsCrashReportingEnabled(a)})}function v(a){return new Promise(function(c,e){C=window.analytics.getService(A);C.getConfig().addCallback(function(g){g.setTrackingPermitted(a);(u=a)?c():(console.warn("Crash reporting not allowed"),e())})})}
function p(){u=!1;return Promise.reject()}function r(){void 0===q&&k("QO");return Promise.resolve()}function k(a){q&&q.sendAppView(a);q=C.getTracker(H[a]);F&&q.set(window.analytics.Parameters.SESSION_GROUP,F);q.forceSessionStart();return Promise.resolve()}function n(a){z!==a&&(z=a,q.sendAppView(a));return Promise.resolve()}function t(a){q.sendException(a.msg,a.fatal);return Promise.resolve()}function w(a){q.sendEvent(a.category,a.action,a.label,a.value);return Promise.resolve()}var H={word:"UA-44583639-1",
sheet:"UA-44583639-2",point:"UA-44583639-3",QO:"UA-44583639-4"},A="Quickoffice",z,u,C,q,F;return{setSessionGroup:function(a){F=a},setTracker:function(a){return g(k,a)},sendState:function(a){return g(n,a)},sendException:function(a){return g(t,a)},sendEvent:function(a){return g(w,a)},reset:function(){q=C=u=z=void 0}}});
define("qowtRoot/utils/i18n",["qowtRoot/utils/typeUtils","utils/analytics/googleAnalytics"],function(h,c){var g={getMessage:function(a,c){var v="????";if(!chrome||!chrome.i18n)return a;h.isString(a)?(v=chrome.i18n.getMessage(a,c),v||(v=a,g.logError_("Missing translation",a))):g.logError_("Invalid string translation Id",a);return v},logError_:function(a,e){console.error(a+" "+e);c.sendException({msg:a,fatal:!1})}};return g});
(function(){function h(a,f){return a.set(f[0],f[1]),a}function c(a,f){return a.add(f),a}function g(a,f,c){switch(c.length){case 0:return a.call(f);case 1:return a.call(f,c[0]);case 2:return a.call(f,c[0],c[1]);case 3:return a.call(f,c[0],c[1],c[2])}return a.apply(f,c)}function a(a,f,c,e){for(var g=-1,k=a.length;++g<k;){var h=a[g];f(e,h,c(h),a)}return e}function e(a,f){for(var c=-1,e=a.length;++c<e&&!1!==f(a[c],c,a););return a}function v(a,f){for(var c=-1,e=a.length;++c<e;)if(!f(a[c],c,a))return!1;
return!0}function p(a,f){for(var c=-1,e=a.length,g=-1,k=[];++c<e;){var h=a[c];f(h,c,a)&&(k[++g]=h)}return k}function r(a,f){return!!a.length&&-1<q(a,f,0)}function k(a,f,c){for(var e=-1,g=a.length;++e<g;)if(c(f,a[e]))return!0;return!1}function n(a,f){for(var c=-1,e=a.length,g=Array(e);++c<e;)g[c]=f(a[c],c,a);return g}function t(a,f){for(var c=-1,e=f.length,g=a.length;++c<e;)a[g+c]=f[c];return a}function w(a,f,c,e){var g=-1,k=a.length;for(e&&k&&(c=a[++g]);++g<k;)c=f(c,a[g],g,a);return c}function H(a,
f,c,e){var g=a.length;for(e&&g&&(c=a[--g]);g--;)c=f(c,a[g],g,a);return c}function A(a,f){for(var c=-1,e=a.length;++c<e;)if(f(a[c],c,a))return!0;return!1}function z(a,f,c){for(var e=-1,g=a.length;++e<g;){var k=a[e],h=f(k);if(null!=h&&(n===l?h===h:c(h,n)))var n=h,p=k}return p}function u(a,f,c,e){var g;return c(a,function(a,c,k){return f(a,c,k)?(g=e?c:a,!1):void 0}),g}function C(a,c,e){for(var g=a.length,k=e?g:-1;e?k--:++k<g;)if(c(a[k],k,a))return k;return-1}function q(a,c,e){if(c!==c)return Lc(a,e);
--e;for(var g=a.length;++e<g;)if(a[e]===c)return e;return-1}function F(a,c,e,g,k){return k(a,function(a,k,h){e=g?(g=!1,a):c(e,a,k,h)}),e}function X(a,c){var e=a.length;for(a.sort(c);e--;)a[e]=a[e].c;return a}function ab(a,c){for(var e,g=-1,k=a.length;++g<k;){var h=c(a[g]);h!==l&&(e=e===l?h:e+h)}return e}function Na(a,c){for(var e=-1,g=Array(a);++e<a;)g[e]=c(e);return g}function Y(a,c){return n(c,function(c){return[c,a[c]]})}function Oa(a){return function(c){return a(c)}}function ya(a,c){return n(c,
function(c){return a[c]})}function ga(a,c){for(var e=-1,g=a.length;++e<g&&-1<q(c,a[e],0););return e}function Jc(a,c){for(var e=a.length;e--&&-1<q(c,a[e],0););return e}function pa(a){return a&&a.Object===Object?a:null}function Kc(a,c){if(a!==c){var e=null===a,g=a===l,k=a===a,h=null===c,n=c===l,p=c===c;if(a>c&&!h||!k||e&&!n&&p||g&&p)return 1;if(c>a&&!e||!p||h&&!g&&k||n&&k)return-1}return 0}function ue(a){return Pb[a]}function ve(a){return Qb[a]}function we(a){return"\\"+Rb[a]}function Lc(a,c,e){var g=
a.length;for(c+=e?0:-1;e?c--:++c<g;){var k=a[c];if(k!==k)return c}return-1}function bb(a){var c=!1;if(null!=a&&"function"!=typeof a.toString)try{c=!!(a+"")}catch(e){}return c}function za(a,c){return a="number"==typeof a||Sb.test(a)?+a:-1,-1<a&&0==a%1&&(null==c?9007199254740991:c)>a}function Mc(a){for(var c,e=[];!(c=a.next()).done;)e.push(c.value);return e}function Ob(a){var c=-1,e=Array(a.size);return a.forEach(function(a,g){e[++c]=[g,a]}),e}function Aa(a,c){for(var e=-1,g=a.length,k=-1,h=[];++e<
g;){var l=a[e];(l===c||"__lodash_placeholder__"===l)&&(a[e]="__lodash_placeholder__",h[++k]=e)}return h}function pb(a){var c=-1,e=Array(a.size);return a.forEach(function(a){e[++c]=a}),e}function cb(a){if(!a||!qb.test(a))return a.length;for(var c=aa.lastIndex=0;aa.test(a);)c++;return c}function xe(a){return Tb[a]}function Nc(L){function f(b){if(O(b)&&!B(b)&&!(b instanceof D)){if(b instanceof Z)return b;if(N.call(b,"__wrapped__"))return Oc(b)}return new Z(b)}function W(){}function Z(b,d){this.__wrapped__=
b;this.__actions__=[];this.__chain__=!!d;this.__index__=0;this.__values__=l}function D(b){this.__wrapped__=b;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function xa(){}function Ba(b){var d=-1,m=b?b.length:0;for(this.clear();++d<m;){var a=b[d];this.set(a[0],a[1])}}function oa(b){var d=-1,m=b?b.length:0;for(this.__data__=new Ba;++d<m;)this.push(b[d])}function pa(b,d){var m=b.__data__;return Pa(d)?(m=m.__data__,"__lodash_hash_undefined__"===
("string"==typeof d?m.string:m.hash)[d]):m.has(d)}function qa(b){var d=-1,m=b?b.length:0;for(this.clear();++d<m;){var a=b[d];this.set(a[0],a[1])}}function $a(b,d){var m=db(b,d);return 0>m?!1:(m==b.length-1?b.pop():sb.call(b,m,1),!0)}function ob(b,d){var m=db(b,d);return 0>m?l:b[m][1]}function db(b,d){for(var m=b.length;m--;)if(ra(b[m][0],d))return m;return-1}function Pc(b,d,m){var a=db(b,d);0>a?b.push([d,m]):b[a][1]=m}function Ub(b,d,m,a){return b===l||ra(b,Qa[m])&&!N.call(a,m)?d:b}function Qc(b,
d,m){(m===l||ra(b[d],m))&&("number"!=typeof d||m!==l||d in b)||(b[d]=m)}function tb(b,d,m){var a=b[d];N.call(b,d)&&ra(a,m)&&(m!==l||d in b)||(b[d]=m)}function Pb(b,d,m,a){return sa(b,function(b,c,e){d(a,b,m(b),e)}),a}function Rc(b,d){return b&&eb(d,S(d),b)}function Vb(b,d){for(var m=-1,a=null==b,c=d.length,e=Array(c);++m<c;)e[m]=a?l:fb(b,d[m]);return e}function Wb(b){return P(b)?b:[]}function Ea(b){return"function"==typeof b?b:ha}function Fa(b){return B(b)?b:Sc(b)}function Ra(b,d,m){return b===b&&
(m!==l&&(b=b>m?m:b),d!==l&&(b=d>b?d:b)),b}function ia(b,d,m,a,c,f){var g;if(m&&(g=c?m(b,a,c,f):m(b)),g!==l)return g;if(!M(b))return b;if(a=B(b)){if(g=ye(b),!d)return T(b,g)}else{var k=ja(b),h="[object Function]"==k||"[object GeneratorFunction]"==k;if(Tc(b))return ze(b,d);if("[object Object]"==k||"[object Arguments]"==k||h&&!c){if(bb(b))return c?b:{};if(g=Ae(h?{}:b),!d)return Uc(b,Rc(g,b))}else{if(!I[k])return c?b:{};g=Be(b,k,d)}}return f||(f=new qa),(c=f.get(b))?c:(f.set(b,g),(a?e:ka)(b,function(a,
rb){tb(g,rb,ia(a,d,m,rb,b,f))}),a?g:Uc(b,g))}function Qb(b){var d=S(b),m=d.length;return function(a){if(null==a)return!m;for(var c=m;c--;){var e=d[c],f=b[e],g=a[e];if(g===l&&!(e in Object(a))||!f(g))return!1}return!0}}function Sa(b){return M(b)?Ce(b):{}}function Vc(b,d,m){if("function"!=typeof b)throw new ba("Expected a function");return ub(function(){b.apply(l,m)},d)}function Ga(b,d,m,a){var c=-1,e=r,f=!0,g=b.length,h=[],l=d.length;if(!g)return h;m&&(d=n(d,Oa(m)));a?(e=k,f=!1):200<=d.length&&(e=
pa,f=!1,d=new oa(d));a:for(;++c<g;){var p=b[c],q=m?m(p):p;if(f&&q===q){for(var t=l;t--;)if(d[t]===q)continue a;h.push(p)}else e(d,q,a)||h.push(p)}return h}function Rb(b,d){var m=!0;return sa(b,function(b,a,c){return m=!!d(b,a,c)}),m}function Wc(b,d){var m=[];return sa(b,function(b,a,c){d(b,a,c)&&m.push(b)}),m}function K(b,d,m,a){a||(a=[]);for(var c=-1,e=b.length;++c<e;){var f=b[c];0<d&&P(f)&&(m||B(f)||Ha(f))?1<d?K(f,d-1,m,a):t(a,f):m||(a[a.length]=f)}return a}function Sb(b,d){return null==b?b:Xb(b,
d,ca)}function ka(b,d){return b&&Xb(b,d,S)}function Yb(b,d){return b&&Xc(b,d,S)}function vb(b,d){return p(d,function(d){return da(b[d])})}function Zb(b,d){d=ta(d,b)?[d+""]:Fa(d);for(var m=0,a=d.length;null!=b&&a>m;)b=b[d[m++]];return m&&m==a?b:l}function $b(b,d){return N.call(b,d)||"object"==typeof b&&d in b&&null===wb(b)}function Tb(b,d){return d in Object(b)}function ac(b,d,m){for(var a=m?k:r,c=b.length,e=c,f=Array(c),g=[];e--;){var h=b[e];e&&d&&(h=n(h,Oa(d)));f[e]=m||!d&&120>h.length?l:new oa(e&&
h)}var h=b[0],p=-1,q=h.length,t=f[0];a:for(;++p<q;){var v=h[p],u=d?d(v):v;if(t?!pa(t,u):!a(g,u,m)){for(e=c;--e;){var w=f[e];if(w?!pa(w,u):!a(b[e],u,m))continue a}t&&t.push(u);g.push(v)}}return g}function Ic(b,d,m,a){return ka(b,function(b,c,e){d(a,m(b),c,e)}),a}function gb(b,d,m){return ta(d,b)||(d=Fa(d),b=hb(b,d),d=U(d)),d=null==b?b:b[d],null==d?l:g(d,b,m)}function Ia(b,d,m,a,c){if(b===d)return!0;if(null==b||null==d||!M(b)&&!O(d))return b!==b&&d!==d;var e=B(b),f=B(d),g="[object Array]",k="[object Array]";
e||(g=ja(b),"[object Arguments]"==g?g="[object Object]":"[object Object]"!=g&&(e=Ta(b)));f||(k=ja(d),"[object Arguments]"==k?k="[object Object]":"[object Object]"!=k&&Ta(d));var h="[object Object]"==g&&!bb(b),f="[object Object]"==k&&!bb(d),k=g==k;!k||e||h?2&a||(g=h&&N.call(b,"__wrapped__"),f=f&&N.call(d,"__wrapped__"),!g&&!f)?k?(c||(c=new qa),b=(e?De:Ee)(b,d,Ia,m,a,c)):b=!1:b=Ia(g?b.value():b,f?d.value():d,m,a,c):b=Fe(b,d,g,Ia,m,a);return b}function bc(b,d,m,a){var c=m.length,e=c,f=!a;if(null==b)return!e;
for(b=Object(b);c--;){var g=m[c];if(f&&g[2]?g[1]!==b[g[0]]:!(g[0]in b))return!1}for(;++c<e;){var g=m[c],k=g[0],h=b[k],n=g[1];if(f&&g[2]){if(h===l&&!(k in b))return!1}else if(g=new qa,k=a?a(h,n,k,b,d,g):l,k===l?!Ia(n,h,a,3,g):!k)return!1}return!0}function Yc(b){var d=typeof b;return"function"==d?b:null==b?ha:"object"==d?B(b)?Zc(b[0],b[1]):$c(b):ad(b)}function bd(b){b=null==b?b:Object(b);var d,m=[];for(d in b)m.push(d);return m}function cd(b,d){var m=-1,a=ea(b)?Array(b.length):[];return sa(b,function(b,
c,e){a[++m]=d(b,c,e)}),a}function $c(b){var d=cc(b);if(1==d.length&&d[0][2]){var m=d[0][0],a=d[0][1];return function(b){return null==b?!1:b[m]===a&&(a!==l||m in Object(b))}}return function(m){return m===b||bc(m,b,d)}}function Zc(b,d){return function(m){var a=fb(m,b);return a===l&&a===d?dd(m,b):Ia(d,a,l,3)}}function xb(b,d,m,a,c){if(b!==d){var f=B(d)||Ta(d)?l:ca(d);e(f||d,function(e,g){if(f&&(g=e,e=d[g]),M(e)){c||(c=new qa);var k=g,h=c,n=b[k],p=d[k],q=h.get(p);if(!q){var q=a?a(n,p,k+"",b,d,h):l,r=
q===l;r&&(q=p,B(p)||Ta(p)?B(n)?q=n:P(n)?q=T(n):(r=!1,q=ia(p,!0)):dc(p)||Ha(p)?Ha(n)?q=ed(n):!M(n)||m&&da(n)?(r=!1,q=ia(p,!0)):q=n:r=!1);h.set(p,q);r&&xb(q,p,m,a,h)}Qc(b,k,q)}else k=a?a(b[g],e,g+"",b,d,c):l,k===l&&(k=e),Qc(b,g,k)})}}function fd(b,d,m){var a=-1,c=y();return d=n(d.length?d:Array(1),function(b){return c(b)}),b=cd(b,function(b,m,c){return{a:n(d,function(d){return d(b)}),b:++a,c:b}}),X(b,function(b,d){var a;a:{a=-1;for(var c=b.a,e=d.a,rb=c.length,f=m.length;++a<rb;){var g=Kc(c[a],e[a]);
if(g){if(a>=f){a=g;break a}a=g*("desc"==m[a]?-1:1);break a}}a=b.b-d.b}return a})}function gd(b,d){return b=Object(b),w(d,function(d,a){return a in b&&(d[a]=b[a]),d},{})}function hd(b,d){var m={};return Sb(b,function(b,a){d(b,a)&&(m[a]=b)}),m}function ec(b){return function(d){return null==d?l:d[b]}}function Ge(b){return function(d){return Zb(d,b)}}function id(b,d,m){var a=-1,c=d.length,e=b;for(m&&(e=n(b,function(b){return m(b)}));++a<c;)for(var f=0,g=d[a],g=m?m(g):g;-1<(f=q(e,g,f));)e!==b&&sb.call(e,
f,1),sb.call(b,f,1);return b}function jd(b,d){for(var m=b?d.length:0,a=m-1;m--;){var c=d[m];if(a==m||c!=e){var e=c;if(za(c))sb.call(b,c,1);else if(ta(c,b))delete b[c];else{var c=Fa(c),f=hb(b,c);null!=f&&delete f[U(c)]}}}return b}function fc(b,d){return b+yb(kd()*(d-b+1))}function gc(b,d,m,a){d=ta(d,b)?[d+""]:Fa(d);for(var c=-1,e=d.length,f=e-1,g=b;null!=g&&++c<e;){var k=d[c];if(M(g)){var h=m;if(c!=f){var n=g[k],h=a?a(n,k,g):l;h===l&&(h=null==n?za(d[c+1])?[]:{}:n)}tb(g,k,h)}g=g[k]}return b}function ua(b,
d,m){var a=-1,c=b.length;0>d&&(d=-d>c?0:c+d);m=m>c?c:m;0>m&&(m+=c);c=d>m?0:m-d>>>0;d>>>=0;for(m=Array(c);++a<c;)m[a]=b[a+d];return m}function He(b,d){var m;return sa(b,function(b,a,c){return m=d(b,a,c),!m}),!!m}function zb(b,d,m){var a=0,c=b?b.length:a;if("number"==typeof d&&d===d&&2147483647>=c){for(;c>a;){var e=a+c>>>1,f=b[e];(m?d>=f:d>f)&&null!==f?a=e+1:c=e}return c}return hc(b,d,ha,m)}function hc(b,d,m,a){d=m(d);for(var c=0,e=b?b.length:0,f=d!==d,g=null===d,k=d===l;e>c;){var h=yb((c+e)/2),n=m(b[h]),
p=n!==l,q=n===n;(f?q||a:g?q&&p&&(a||null!=n):k?q&&(a||p):null==n?0:a?d>=n:d>n)?c=h+1:e=h}return fa(e,4294967294)}function ld(b,d){for(var m=0,a=b.length,c=b[0],e=d?d(c):c,f=e,g=0,k=[c];++m<a;)c=b[m],e=d?d(c):c,ra(e,f)||(f=e,k[++g]=c);return k}function Ja(b,d,m){var a=-1,c=r,e=b.length,f=!0,g=[],h=g;if(m)f=!1,c=k;else if(200>e)h=d?[]:g;else{if(c=d?null:Ie(b))return pb(c);f=!1;c=pa;h=new oa}a:for(;++a<e;){var l=b[a],n=d?d(l):l;if(f&&n===n){for(var p=h.length;p--;)if(h[p]===n)continue a;d&&h.push(n);
g.push(l)}else c(h,n,m)||(h!==g&&h.push(n),g.push(l))}return g}function Ab(b,d,m,a){for(var c=b.length,e=a?c:-1;(a?e--:++e<c)&&d(b[e],e,b););return m?ua(b,a?0:e,a?e+1:c):ua(b,a?e+1:0,a?c:e)}function md(b,d){var m=b;return m instanceof D&&(m=m.value()),w(d,function(b,d){return d.func.apply(d.thisArg,t([b],d.args))},m)}function ic(b,d,m){for(var a=-1,c=b.length;++a<c;)var e=e?t(Ga(e,b[a],d,m),Ga(b[a],e,d,m)):b[a];return e&&e.length?Ja(e,d,m):[]}function nd(b,d,m){for(var a=-1,c=b.length,e=d.length,
f={};++a<c;)m(f,b[a],e>a?d[a]:l);return f}function ze(b,d){if(d)return b.slice();var m=new b.constructor(b.length);return b.copy(m),m}function od(b){var d=new b.constructor(b.byteLength);return(new Bb(d)).set(new Bb(b)),d}function pd(b,d,m,a){var c=-1,e=b.length,f=m.length,g=-1,k=d.length,h=Q(e-f,0),l=Array(k+h);for(a=!a;++g<k;)l[g]=d[g];for(;++c<f;)(a||e>c)&&(l[m[c]]=b[c]);for(;h--;)l[g++]=b[c++];return l}function qd(b,d,m,a){var c=-1,e=b.length,f=-1,g=m.length,k=-1,h=d.length,l=Q(e-g,0),n=Array(l+
h);for(a=!a;++c<l;)n[c]=b[c];for(l=c;++k<h;)n[l+k]=d[k];for(;++f<g;)(a||e>c)&&(n[l+m[f]]=b[c++]);return n}function T(b,d){var m=-1,a=b.length;for(d||(d=Array(a));++m<a;)d[m]=b[m];return d}function eb(b,d,m){return jc(b,d,m)}function jc(b,d,m,a){m||(m={});for(var c=-1,e=d.length;++c<e;){var f=d[c],g=a?a(m[f],b[f],f,m,b):b[f];tb(m,f,g)}return m}function Uc(b,d){return eb(b,Je(b),d)}function Cb(b,d){return function(m,c){var e=B(m)?a:Pb,f=d?d():{};return e(m,b,y(c),f)}}function Ua(b){return x(function(d,
m){var a=-1,c=m.length,e=1<c?m[c-1]:l,f=2<c?m[2]:l,e="function"==typeof e?(c--,e):l;f&&la(m[0],m[1],f)&&(e=3>c?l:e,c=1);for(d=Object(d);++a<c;)(f=m[a])&&b(d,f,a,e);return d})}function rd(b,d){return function(a,c){if(null==a)return a;if(!ea(a))return b(a,c);for(var e=a.length,f=d?e:-1,g=Object(a);(d?f--:++f<e)&&!1!==c(g[f],f,g););return a}}function sd(b){return function(d,a,c){var e=-1,f=Object(d);c=c(d);for(var g=c.length;g--;){var k=c[b?g:++e];if(!1===a(f[k],k,f))break}return d}}function Ke(b,d,
a){function c(){return(this&&this!==ma&&this instanceof c?f:b).apply(e?a:this,arguments)}var e=1&d,f=ib(b);return c}function td(b){return function(d){d=G(d);var a=qb.test(d)?d.match(aa):l,c=a?a[0]:d.charAt(0);return d=a?a.slice(1).join(""):d.slice(1),c[b]()+d}}function Va(b){return function(d){return w(ud(vd(d)),b,"")}}function ib(b){return function(){var d=arguments;switch(d.length){case 0:return new b;case 1:return new b(d[0]);case 2:return new b(d[0],d[1]);case 3:return new b(d[0],d[1],d[2]);case 4:return new b(d[0],
d[1],d[2],d[3]);case 5:return new b(d[0],d[1],d[2],d[3],d[4]);case 6:return new b(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var a=Sa(b.prototype),d=b.apply(a,d);return M(d)?d:a}}function Le(b,d,a){function c(){for(var f=arguments.length,k=Array(f),h=f,n=Wa(c);h--;)k[h]=arguments[h];return h=3>f&&k[0]!==n&&k[f-1]!==n?[]:Aa(k,n),f-=h.length,a>f?wd(b,d,Db,c.placeholder,l,k,h,l,l,a-f):g(this&&this!==ma&&this instanceof c?e:b,this,k)}var e=ib(b);return c}function xd(b){return x(function(d){d=
K(d,1);var a=d.length,c=a,e=Z.prototype.thru;for(b&&d.reverse();c--;){var f=d[c];if("function"!=typeof f)throw new ba("Expected a function");if(e&&!g&&"wrapper"==Eb(f))var g=new Z([],!0)}for(c=g?c:a;++c<a;)var f=d[c],e=Eb(f),k="wrapper"==e?kc(f):l,g=k&&lc(k[0])&&424==k[1]&&!k[4].length&&1==k[9]?g[Eb(k[0])].apply(g,k[3]):1==f.length&&lc(f)?g[e]():g.thru(f);return function(){var b=arguments,c=b[0];if(g&&1==b.length&&B(c)&&200<=c.length)return g.plant(c).value();for(var e=0,b=a?d[e].apply(this,b):c;++e<
a;)b=d[e].call(this,b);return b}})}function Db(b,d,a,c,e,f,g,k,h,n){function p(){for(var z=arguments.length,A=z,F=Array(z);A--;)F[A]=arguments[A];if(u){var X,x=Wa(p),A=F.length;for(X=0;A--;)F[A]===x&&X++}if(c&&(F=pd(F,c,e,u)),f&&(F=qd(F,f,g,u)),z-=X,u&&n>z)return x=Aa(F,x),wd(b,d,Db,p.placeholder,a,F,x,k,h,n-z);if(x=r?a:this,A=t?x[b]:b,z=F.length,k){X=F.length;for(var C=fa(k.length,X),y=T(F);C--;){var B=k[C];F[C]=za(B,X)?y[B]:l}}else v&&1<z&&F.reverse();return q&&z>h&&(F.length=h),this&&this!==ma&&
this instanceof p&&(A=w||ib(A)),A.apply(x,F)}var q=128&d,r=1&d,t=2&d,u=24&d,v=512&d,w=t?l:ib(b);return p}function yd(b,d){return function(a,c){return Ic(a,b,d(c),{})}}function mc(b){return x(function(d){return d=n(K(d,1),y()),x(function(a){var c=this;return b(d,function(b){return g(b,c,a)})})})}function Fb(b,d,a){return d=E(d),b=cb(b),d&&d>b?(d-=b,a=a===l?" ":a+"",b=zd(a,Gb(d/cb(a))),qb.test(a)?b.match(aa).slice(0,d).join(""):b.slice(0,d)):""}function Me(b,d,a,c){function e(){for(var d=-1,h=arguments.length,
l=-1,n=c.length,p=Array(n+h),q=this&&this!==ma&&this instanceof e?k:b;++l<n;)p[l]=c[l];for(;h--;)p[l++]=arguments[++d];return g(q,f?a:this,p)}var f=1&d,k=ib(b);return e}function Ad(b){return function(d,a,c){c&&"number"!=typeof c&&la(d,a,c)&&(a=c=l);d=R(d);d=d===d?d:0;a===l?(a=d,d=0):a=R(a)||0;c=c===l?a>d?1:-1:R(c)||0;var e=-1;a=Q(Gb((a-d)/(c||1)),0);for(var f=Array(a);a--;)f[b?a:++e]=d,d+=c;return f}}function wd(b,d,a,c,e,f,g,k,h,n){var p=8&d;k=k?T(k):l;var q=p?g:l;g=p?l:g;var r=p?f:l;return f=p?
l:f,d=(d|(p?32:64))&~(p?64:32),4&d||(d&=-4),d=[b,d,e,r,q,f,g,k,h,n],a=a.apply(l,d),lc(b)&&Bd(a,d),a.placeholder=c,a}function nc(b){var d=Xa[b];return function(b,a){if(b=R(b),a=E(a)){var c=(G(b)+"e").split("e"),c=d(c[0]+"e"+(+c[1]+a)),c=(G(c)+"e").split("e");return+(c[0]+"e"+(+c[1]-a))}return d(b)}}function va(b,d,a,c,e,f,g,k){var h=2&d;if(!h&&"function"!=typeof b)throw new ba("Expected a function");var n=c?c.length:0;if(n||(d&=-97,c=e=l),g=g===l?g:Q(E(g),0),k=k===l?k:E(k),n-=e?e.length:0,64&d){var p=
c,q=e;c=e=l}var r=h?l:kc(b);return f=[b,d,a,c,e,p,q,f,g,k],r&&(a=f[1],b=r[1],d=a|b,c=128==b&&8==a||128==b&&256==a&&r[8]>=f[7].length||384==b&&r[8]>=r[7].length&&8==a,131>d||c)&&(1&b&&(f[2]=r[2],d|=1&a?0:4),(a=r[3])&&(c=f[3],f[3]=c?pd(c,a,r[4]):T(a),f[4]=c?Aa(f[3],"__lodash_placeholder__"):T(r[4])),(a=r[5])&&(c=f[5],f[5]=c?qd(c,a,r[6]):T(a),f[6]=c?Aa(f[5],"__lodash_placeholder__"):T(r[6])),(a=r[7])&&(f[7]=T(a)),128&b&&(f[8]=null==f[8]?r[8]:fa(f[8],r[8])),null==f[9]&&(f[9]=r[9]),f[0]=r[0],f[1]=d),b=
f[0],d=f[1],a=f[2],c=f[3],e=f[4],k=f[9]=null==f[9]?h?0:b.length:Q(f[9]-n,0),!k&&24&d&&(d&=-25),h=d&&1!=d?8==d||16==d?Le(b,d,k):32!=d&&33!=d||e.length?Db.apply(l,f):Me(b,d,a,c):Ke(b,d,a),(r?Cd:Bd)(h,f)}function De(b,d,a,c,e,f){var g=-1,k=2&e,h=1&e,n=b.length,p=d.length;if(!(n==p||k&&p>n))return!1;if(p=f.get(b))return p==d;p=!0;for(f.set(b,d);++g<n;){var q=b[g],r=d[g];if(c)var t=k?c(r,q,g,d,b,f):c(q,r,g,b,d,f);if(t!==l){if(t)continue;p=!1;break}if(h){if(!A(d,function(b){return q===b||a(q,b,c,e,f)})){p=
!1;break}}else if(q!==r&&!a(q,r,c,e,f)){p=!1;break}}return f["delete"](b),p}function Fe(b,d,a,c,e,f){switch(a){case "[object ArrayBuffer]":if(b.byteLength!=d.byteLength||!c(new Bb(b),new Bb(d)))break;return!0;case "[object Boolean]":case "[object Date]":return+b==+d;case "[object Error]":return b.name==d.name&&b.message==d.message;case "[object Number]":return b!=+b?d!=+d:b==+d;case "[object RegExp]":case "[object String]":return b==d+"";case "[object Map]":var g=Ob;case "[object Set]":return g||
(g=pb),(2&f||b.size==d.size)&&c(g(b),g(d),e,1|f);case "[object Symbol]":return!!wa&&oc.call(b)==oc.call(d)}return!1}function Ee(b,d,a,c,e,f){var g=2&e,k=S(b),h=k.length,n=S(d).length;if(h!=n&&!g)return!1;for(var p=h;p--;){var q=k[p];if(!(g?q in d:$b(d,q)))return!1}if(n=f.get(b))return n==d;n=!0;f.set(b,d);for(var r=g;++p<h;){var q=k[p],t=b[q],u=d[q];if(c)var v=g?c(u,t,q,d,b,f):c(t,u,q,b,d,f);if(v===l?t!==u&&!a(t,u,c,e,f):!v){n=!1;break}r||(r="constructor"==q)}return n&&!r&&(a=b.constructor,c=d.constructor,
a!=c&&"constructor"in b&&"constructor"in d&&!("function"==typeof a&&a instanceof a&&"function"==typeof c&&c instanceof c)&&(n=!1)),f["delete"](b),n}function Eb(b){for(var d=b.name+"",a=jb[d],c=N.call(jb,d)?a.length:0;c--;){var e=a[c],f=e.func;if(null==f||f==b)return e.name}return d}function y(){var b=f.iteratee||pc,b=b===pc?Yc:b;return arguments.length?b(arguments[0],arguments[1]):b}function cc(b){b=Dd(b);for(var d=b.length;d--;){var a,c=b[d];a=b[d][1];a=a===a&&!M(a);c[2]=a}return b}function Hb(b,
d){var a=null==b?l:b[d];return Ed(a)?a:l}function Wa(b){return(N.call(f,"placeholder")?f:b).placeholder}function ja(b){return V.call(b)}function Fd(b,d,a){if(null==b)return!1;var c=a(b,d);return c||ta(d)||(d=Fa(d),b=hb(b,d),null!=b&&(d=U(d),c=a(b,d))),a=b?b.length:l,c||!!a&&kb(a)&&za(d,a)&&(B(b)||Ka(b)||Ha(b))}function ye(b){var d=b.length,a=b.constructor(d);return d&&"string"==typeof b[0]&&N.call(b,"index")&&(a.index=b.index,a.input=b.input),a}function Ae(b){return da(b.constructor)&&!qc(b)?Sa(wb(b)):
{}}function Be(b,d,a){var e=b.constructor;switch(d){case "[object ArrayBuffer]":return od(b);case "[object Boolean]":case "[object Date]":return new e(+b);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return d=b.buffer,a=a?od(d):d,new b.constructor(a,b.byteOffset,b.length);case "[object Map]":return a=
b.constructor,w(Ob(b),h,new a);case "[object Number]":case "[object String]":return new e(b);case "[object RegExp]":return a=new b.constructor(b.source,Gd.exec(b)),a.lastIndex=b.lastIndex,a;case "[object Set]":return a=b.constructor,w(pb(b),c,new a);case "[object Symbol]":return wa?Object(oc.call(b)):{}}}function Hd(b){var d=b?b.length:l;return kb(d)&&(B(b)||Ka(b)||Ha(b))?Na(d,String):null}function la(b,d,a){if(!M(a))return!1;var c=typeof d;return("number"==c?ea(a)&&za(d,a.length):"string"==c&&d in
a)?ra(a[d],b):!1}function ta(b,d){return"number"==typeof b?!0:!B(b)&&(Ne.test(b)||!Oe.test(b)||null!=d&&b in Object(d))}function Pa(b){var d=typeof b;return"number"==d||"boolean"==d||"string"==d&&"__proto__"!=b||null==b}function lc(b){var d=Eb(b),a=f[d];return"function"==typeof a&&d in D.prototype?b===a?!0:(d=kc(a),!!d&&b===d[0]):!1}function qc(b){var d=b&&b.constructor,d=da(d)&&d.prototype||Qa;return b===d}function Id(b,d,a,c,e,f){return M(b)&&M(d)&&(f.set(d,b),xb(b,d,l,Id,f)),b}function hb(b,d){return 1==
d.length?b:fb(b,ua(d,0,-1))}function Sc(b){var d=[];return G(b).replace(Pe,function(b,a,c,e){d.push(c?e.replace(Qe,"$1"):a||b)}),d}function Oc(b){if(b instanceof D)return b.clone();var d=new Z(b.__wrapped__,b.__chain__);return d.__actions__=T(b.__actions__),d.__index__=b.__index__,d.__values__=b.__values__,d}function Jd(b,d,a){var c=b?b.length:0;return c?(d=a||d===l?1:E(d),ua(b,0>d?0:d,c)):[]}function Kd(b,d,a){var c=b?b.length:0;return c?(d=a||d===l?1:E(d),d=c-d,ua(b,0,0>d?0:d)):[]}function Ld(b){return b?
b[0]:l}function U(b){var d=b?b.length:0;return d?b[d-1]:l}function Md(b,d){return b&&b.length&&d&&d.length?id(b,d):b}function rc(b){return b?Re.call(b):b}function sc(b){if(!b||!b.length)return[];var d=0;return b=p(b,function(b){return P(b)?(d=Q(b.length,d),!0):void 0}),Na(d,function(d){return n(b,ec(d))})}function Nd(b,d){if(!b||!b.length)return[];var a=sc(b);return null==d?a:n(a,function(b){return g(d,l,b)})}function Od(b){return b=f(b),b.__chain__=!0,b}function Ib(b,d){return d(b)}function Se(){return this}
function Pd(b,d){return"function"==typeof d&&B(b)?e(b,d):sa(b,Ea(d))}function Qd(b,d){var a;if("function"==typeof d&&B(b)){for(a=b.length;a--&&!1!==d(b[a],a,b););a=b}else a=tc(b,Ea(d));return a}function Rd(b,d){return(B(b)?n:cd)(b,y(d,3))}function Sd(b,d){var a=-1,c=uc(b),e=c.length,f=e-1;for(d=Ra(E(d),0,e);++a<d;){var e=fc(a,f),g=c[e];c[e]=c[a];c[a]=g}return c.length=d,c}function Td(b,d,a){return d=a?l:d,d=b&&null==d?b.length:d,va(b,128,l,l,l,l,d)}function Ud(b,d){var a;if("function"!=typeof d)throw new ba("Expected a function");
return b=E(b),function(){return 0<--b&&(a=d.apply(this,arguments)),1>=b&&(d=l),a}}function Vd(b,d,a){return d=a?l:d,b=va(b,8,l,l,l,l,l,d),b.placeholder=Vd.placeholder,b}function Wd(b,d,a){return d=a?l:d,b=va(b,16,l,l,l,l,l,d),b.placeholder=Wd.placeholder,b}function Xd(b,d,a){function c(){t&&lb(t);n&&lb(n);v=0;h=n=r=t=u=l}function e(d,a){a&&lb(a);n=t=u=l;d&&(v=mb(),p=b.apply(r,h),t||n||(h=r=l))}function f(){var b=d-(mb()-q);0>=b||b>d?e(u,n):t=ub(f,b)}function g(){e(A,t)}function k(){if(h=arguments,
q=mb(),r=this,u=A&&(t||!w),!1===z)var a=w&&!t;else{v||n||w||(v=q);var c=z-(q-v),m=(0>=c||c>z)&&(w||n);m?(n&&(n=lb(n)),v=q,p=b.apply(r,h)):n||(n=ub(g,c))}return m&&t?t=lb(t):t||d===z||(t=ub(f,d)),a&&(m=!0,p=b.apply(r,h)),!m||t||n||(h=r=l),p}var h,n,p,q,r,t,u,v=0,w=!1,z=!1,A=!0;if("function"!=typeof b)throw new ba("Expected a function");return d=R(d)||0,M(a)&&(w=!!a.leading,z="maxWait"in a&&Q(R(a.maxWait)||0,d),A="trailing"in a?!!a.trailing:A),k.cancel=c,k.flush=function(){return(t&&u||n&&A)&&(p=b.apply(r,
h)),c(),p},k}function vc(b,d){if("function"!=typeof b||d&&"function"!=typeof d)throw new ba("Expected a function");var a=function(){var c=arguments,e=d?d.apply(this,c):c[0],f=a.cache;return f.has(e)?f.get(e):(c=b.apply(this,c),a.cache=f.set(e,c),c)};return a.cache=new vc.Cache,a}function x(b,d){if("function"!=typeof b)throw new ba("Expected a function");return d=Q(d===l?b.length-1:E(d),0),function(){for(var a=arguments,c=-1,e=Q(a.length-d,0),f=Array(e);++c<e;)f[c]=a[d+c];switch(d){case 0:return b.call(this,
f);case 1:return b.call(this,a[0],f);case 2:return b.call(this,a[0],a[1],f)}e=Array(d+1);for(c=-1;++c<d;)e[c]=a[c];return e[d]=f,g(b,this,e)}}function ra(b,d){return b===d||b!==b&&d!==d}function wc(b,d){return b>d}function Ha(b){return P(b)&&N.call(b,"callee")&&(!Yd.call(b,"callee")||"[object Arguments]"==V.call(b))}function ea(b){return null!=b&&!("function"==typeof b&&da(b))&&kb(Te(b))}function P(b){return O(b)&&ea(b)}function xc(b){return O(b)?"[object Error]"==V.call(b)||"string"==typeof b.message&&
"string"==typeof b.name:!1}function da(b){return b=M(b)?V.call(b):"","[object Function]"==b||"[object GeneratorFunction]"==b}function Zd(b){return"number"==typeof b&&b==E(b)}function kb(b){return"number"==typeof b&&-1<b&&0==b%1&&9007199254740991>=b}function M(b){var d=typeof b;return!!b&&("object"==d||"function"==d)}function O(b){return!!b&&"object"==typeof b}function Ed(b){return null==b?!1:da(b)?$d.test(Ca.call(b)):O(b)&&(bb(b)?$d:Ue).test(b)}function ae(b){return"number"==typeof b||O(b)&&"[object Number]"==
V.call(b)}function dc(b){return!O(b)||"[object Object]"!=V.call(b)||bb(b)?!1:(b=wb(b),null===b?!0:(b=b.constructor,"function"==typeof b&&b instanceof b&&Ca.call(b)==Ve))}function be(b){return M(b)&&"[object RegExp]"==V.call(b)}function Ka(b){return"string"==typeof b||!B(b)&&O(b)&&"[object String]"==V.call(b)}function ce(b){return"symbol"==typeof b||O(b)&&"[object Symbol]"==V.call(b)}function Ta(b){return O(b)&&kb(b.length)&&!!J[V.call(b)]}function yc(b,d){return d>b}function uc(b){if(!b)return[];
if(ea(b))return Ka(b)?b.match(aa):T(b);if(La&&b[La])return Mc(b[La]());var d=ja(b);return("[object Map]"==d?Ob:"[object Set]"==d?pb:Jb)(b)}function E(b){if(!b)return 0===b?b:0;if(b=R(b),b===Kb||b===-Kb)return 1.7976931348623157E308*(0>b?-1:1);var d=b%1;return b===b?d?b-d:b:0}function de(b){return b?Ra(E(b),0,4294967295):0}function R(b){if(M(b)&&(b=da(b.valueOf)?b.valueOf():b,b=M(b)?b+"":b),"string"!=typeof b)return 0===b?b:+b;b=b.replace(zc,"");var d=We.test(b);return d||Xe.test(b)?Ye(b.slice(2),
d?2:8):Ze.test(b)?$e:+b}function ed(b){return eb(b,ca(b))}function G(b){if("string"==typeof b)return b;if(null==b)return"";if(ce(b))return wa?af.call(b):"";var d=b+"";return"0"==d&&1/b==-Kb?"-0":d}function fb(b,d,a){return b=null==b?l:Zb(b,d),b===l?a:b}function ee(b,d){return Fd(b,d,$b)}function dd(b,d){return Fd(b,d,Tb)}function S(b){var d=qc(b);if(!d&&!ea(b))return bf(Object(b));var a,c=Hd(b),e=!!c,c=c||[],f=c.length;for(a in b)!$b(b,a)||e&&("length"==a||za(a,f))||d&&"constructor"==a||c.push(a);
return c}function ca(b){for(var d=-1,a=qc(b),c=bd(b),e=c.length,f=Hd(b),g=!!f,f=f||[],k=f.length;++d<e;){var h=c[d];g&&("length"==h||za(h,k))||"constructor"==h&&(a||!N.call(b,h))||f.push(h)}return f}function Dd(b){return Y(b,S(b))}function Jb(b){return b?ya(b,S(b)):[]}function Ac(b){return fe(G(b).toLowerCase())}function vd(b){return(b=G(b))&&b.replace(cf,ue).replace(df,"")}function zd(b,d){b=G(b);d=E(d);var a="";if(!b||1>d||9007199254740991<d)return a;do d%2&&(a+=b),d=yb(d/2),b+=b;while(d);return a}
function ud(b,d,a){return b=G(b),d=a?l:d,d===l&&(d=ef.test(b)?ff:gf),b.match(d)||[]}function Bc(b){return function(){return b}}function ha(b){return b}function pc(b){return Yc("function"==typeof b?b:ia(b,!0))}function Cc(b,d,a){var c=S(d),f=vb(d,c);null!=a||M(d)&&(f.length||!c.length)||(a=d,d=b,b=this,f=vb(d,S(d)));var g=M(a)&&"chain"in a?a.chain:!0,k=da(b);return e(f,function(a){var c=d[a];b[a]=c;k&&(b.prototype[a]=function(){var d=this.__chain__;if(g||d){var a=b(this.__wrapped__);return(a.__actions__=
T(this.__actions__)).push({func:c,args:arguments,thisArg:b}),a.__chain__=d,a}return c.apply(b,t([this.value()],arguments))})}),b}function Dc(){}function ad(b){return ta(b)?ec(b):Ge(b)}function ge(b){return b&&b.length?ab(b,ha):0}L=L?Da.defaults({},L,Da.pick(ma,hf)):ma;var jf=L.Date,kf=L.Error,Xa=L.Math,Ec=L.RegExp,ba=L.TypeError,Lb=L.Array.prototype,Qa=L.Object.prototype,Ca=L.Function.prototype.toString,N=Qa.hasOwnProperty,lf=0,Ve=Ca.call(Object),V=Qa.toString,mf=ma._,$d=Ec("^"+Ca.call(N).replace(Fc,
"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ie=he?L.Buffer:l,je=L.Reflect,wa=L.Symbol,Bb=L.Uint8Array,lb=L.clearTimeout,ke=je?je.enumerate:l,wb=Object.getPrototypeOf,nf=Object.getOwnPropertySymbols,La="symbol"==typeof(La=wa&&wa.iterator)?La:l,Ce=Object.create,Yd=Qa.propertyIsEnumerable,ub=L.setTimeout,sb=Lb.splice,Gb=Xa.ceil,yb=Xa.floor,of=L.isFinite,pf=Lb.join,bf=Object.keys,Q=Xa.max,fa=Xa.min,qf=L.parseInt,kd=Xa.random,Re=Lb.reverse,na=Hb(L,"Map"),Ma=Hb(L,
"Set"),Ya=Hb(L,"WeakMap"),Za=Hb(Object,"create"),Mb=Ya&&new Ya,rf=na?Ca.call(na):"",sf=Ma?Ca.call(Ma):"",tf=Ya?Ca.call(Ya):"",le=wa?wa.prototype:l,oc=wa?le.valueOf:l,af=wa?le.toString:l,jb={};f.templateSettings={escape:uf,evaluate:vf,interpolate:me,variable:"",imports:{_:f}};var sa=rd(ka),tc=rd(Yb,!0),Xb=sd(),Xc=sd(!0);ke&&!Yd.call({valueOf:1},"valueOf")&&(bd=function(b){return Mc(ke(b))});var Cd=Mb?function(b,d){return Mb.set(b,d),b}:ha,Ie=Ma&&2===(new Ma([1,2])).size?function(b){return new Ma(b)}:
Dc,kc=Mb?function(b){return Mb.get(b)}:Dc,Te=ec("length"),Je=nf||function(){return[]};(na&&"[object Map]"!=ja(new na)||Ma&&"[object Set]"!=ja(new Ma)||Ya&&"[object WeakMap]"!=ja(new Ya))&&(ja=function(b){var d=V.call(b);if(b="[object Object]"==d?b.constructor:null,b="function"==typeof b?Ca.call(b):"")switch(b){case rf:return"[object Map]";case sf:return"[object Set]";case tf:return"[object WeakMap]"}return d});var Bd=function(){var b=0,d=0;return function(a,c){var e=mb(),f=16-(e-d);if(d=e,0<f){if(150<=
++b)return a}else b=0;return Cd(a,c)}}(),wf=x(function(b,d){B(b)||(b=null==b?[]:[Object(b)]);d=K(d,1);for(var a=b,c=d,e=-1,f=a.length,g=-1,k=c.length,h=Array(f+k);++e<f;)h[e]=a[e];for(;++g<k;)h[e++]=c[g];return h}),xf=x(function(b,d){return P(b)?Ga(b,K(d,1,!0)):[]}),yf=x(function(b,d){var a=U(d);return P(a)&&(a=l),P(b)?Ga(b,K(d,1,!0),y(a)):[]}),zf=x(function(b,d){var a=U(d);return P(a)&&(a=l),P(b)?Ga(b,K(d,1,!0),l,a):[]}),Af=x(function(b){var d=n(b,Wb);return d.length&&d[0]===b[0]?ac(d):[]}),Bf=x(function(b){var d=
U(b),a=n(b,Wb);return d===U(a)?d=l:a.pop(),a.length&&a[0]===b[0]?ac(a,y(d)):[]}),Cf=x(function(b){var d=U(b),a=n(b,Wb);return d===U(a)?d=l:a.pop(),a.length&&a[0]===b[0]?ac(a,l,d):[]}),Df=x(Md),Ef=x(function(b,d){d=n(K(d,1),String);var a=Vb(b,d);return jd(b,d.sort(Kc)),a}),Ff=x(function(b){return Ja(K(b,1,!0))}),Gf=x(function(b){var d=U(b);return P(d)&&(d=l),Ja(K(b,1,!0),y(d))}),Hf=x(function(b){var d=U(b);return P(d)&&(d=l),Ja(K(b,1,!0),l,d)}),If=x(function(b,d){return P(b)?Ga(b,d):[]}),Jf=x(function(b){return ic(p(b,
P))}),Kf=x(function(b){var d=U(b);return P(d)&&(d=l),ic(p(b,P),y(d))}),Lf=x(function(b){var d=U(b);return P(d)&&(d=l),ic(p(b,P),l,d)}),Mf=x(sc),Nf=x(function(b){var d=b.length,d=1<d?b[d-1]:l,d="function"==typeof d?(b.pop(),d):l;return Nd(b,d)}),Of=x(function(b){b=K(b,1);var d=b.length,a=d?b[0]:0,c=this.__wrapped__,e=function(d){return Vb(d,b)};return 1>=d&&!this.__actions__.length&&c instanceof D&&za(a)?(c=c.slice(a,+a+(d?1:0)),c.__actions__.push({func:Ib,args:[e],thisArg:l}),(new Z(c,this.__chain__)).thru(function(b){return d&&
!b.length&&b.push(l),b})):this.thru(e)}),Pf=Cb(function(b,d,a){N.call(b,a)?++b[a]:b[a]=1}),Qf=Cb(function(b,d,a){N.call(b,a)?b[a].push(d):b[a]=[d]}),Rf=x(function(b,d,a){var c=-1,e="function"==typeof d,f=ta(d),k=ea(b)?Array(b.length):[];return sa(b,function(b){var h=e?d:f&&null!=b?b[d]:l;k[++c]=h?g(h,b,a):gb(b,d,a)}),k}),Sf=Cb(function(b,d,a){b[a]=d}),Tf=Cb(function(b,d,a){b[a?0:1].push(d)},function(){return[[],[]]}),Uf=x(function(b,d){if(null==b)return[];var a=d.length;return 1<a&&la(b,d[0],d[1])?
d=[]:2<a&&la(d[0],d[1],d[2])&&(d.length=1),fd(b,K(d,1),[])}),mb=jf.now,Gc=x(function(b,d,a){var c=1;if(a.length)var e=Aa(a,Wa(Gc)),c=32|c;return va(b,c,d,a,e)}),ne=x(function(b,d,a){var c=3;if(a.length)var e=Aa(a,Wa(ne)),c=32|c;return va(d,c,b,a,e)}),Vf=x(function(b,d){return Vc(b,1,d)}),Wf=x(function(b,d,a){return Vc(b,R(d)||0,a)}),Xf=x(function(b,d){d=n(K(d,1),y());var a=d.length;return x(function(c){for(var e=-1,f=fa(c.length,a);++e<f;)c[e]=d[e].call(this,c[e]);return g(b,this,c)})}),Hc=x(function(b,
d){var a=Aa(d,Wa(Hc));return va(b,32,l,d,a)}),oe=x(function(b,d){var a=Aa(d,Wa(oe));return va(b,64,l,d,a)}),Yf=x(function(b,d){return va(b,256,l,l,l,K(d,1))}),B=Array.isArray,Tc=ie?function(b){return b instanceof ie}:Bc(!1),Zf=Ua(function(b,d){eb(d,S(d),b)}),pe=Ua(function(b,d){eb(d,ca(d),b)}),nb=Ua(function(b,d,a,c){jc(d,ca(d),b,c)}),$f=Ua(function(b,d,a,c){jc(d,S(d),b,c)}),ag=x(function(b,d){return Vb(b,K(d,1))}),bg=x(function(b){return b.push(l,Ub),g(nb,l,b)}),cg=x(function(b){return b.push(l,
Id),g(qe,l,b)}),dg=yd(function(b,d,a){b[d]=a},Bc(ha)),eg=yd(function(b,d,a){N.call(b,d)?b[d].push(a):b[d]=[a]},y),fg=x(gb),gg=Ua(function(b,d,a){xb(b,d,a)}),qe=Ua(function(b,d,a,c){xb(b,d,a,c)}),hg=x(function(b,d){return null==b?{}:(d=n(K(d,1),String),gd(b,Ga(ca(b),d)))}),ig=x(function(b,d){return null==b?{}:gd(b,K(d,1))}),jg=Va(function(b,d,a){return d=d.toLowerCase(),b+(a?Ac(d):d)}),kg=Va(function(b,d,a){return b+(a?"-":"")+d.toLowerCase()}),lg=Va(function(b,d,a){return b+(a?" ":"")+d.toLowerCase()}),
mg=td("toLowerCase"),fe=td("toUpperCase"),ng=Va(function(b,d,a){return b+(a?"_":"")+d.toLowerCase()}),og=Va(function(b,d,a){return b+(a?" ":"")+Ac(d)}),pg=Va(function(b,d,a){return b+(a?" ":"")+d.toUpperCase()}),re=x(function(b,d){try{return g(b,l,d)}catch(a){return xc(a)?a:new kf(a)}}),qg=x(function(b,d){return e(K(d,1),function(d){b[d]=Gc(b[d],b)}),b}),rg=xd(),sg=xd(!0),tg=x(function(b,d){return function(a){return gb(a,b,d)}}),ug=x(function(b,d){return function(a){return gb(b,a,d)}}),vg=mc(n),wg=
mc(v),xg=mc(A),yg=Ad(),zg=Ad(!0),Ag=nc("ceil"),Bg=nc("floor"),Cg=nc("round");return f.prototype=W.prototype,Z.prototype=Sa(W.prototype),Z.prototype.constructor=Z,D.prototype=Sa(W.prototype),D.prototype.constructor=D,xa.prototype=Za?Za(null):Qa,Ba.prototype.clear=function(){this.__data__={hash:new xa,map:na?new na:[],string:new xa}},Ba.prototype["delete"]=function(b){var d=this.__data__;return Pa(b)?(d="string"==typeof b?d.string:d.hash,(Za?d[b]!==l:N.call(d,b))&&delete d[b]):na?d.map["delete"](b):
$a(d.map,b)},Ba.prototype.get=function(b){var d=this.__data__;return Pa(b)?(d="string"==typeof b?d.string:d.hash,Za?(b=d[b],b="__lodash_hash_undefined__"===b?l:b):b=N.call(d,b)?d[b]:l,b):na?d.map.get(b):ob(d.map,b)},Ba.prototype.has=function(b){var d=this.__data__;return Pa(b)?(d="string"==typeof b?d.string:d.hash,b=Za?d[b]!==l:N.call(d,b)):b=na?d.map.has(b):-1<db(d.map,b),b},Ba.prototype.set=function(b,d){var a=this.__data__;return Pa(b)?("string"==typeof b?a.string:a.hash)[b]=Za&&d===l?"__lodash_hash_undefined__":
d:na?a.map.set(b,d):Pc(a.map,b,d),this},oa.prototype.push=function(b){var d=this.__data__;Pa(b)?(d=d.__data__,("string"==typeof b?d.string:d.hash)[b]="__lodash_hash_undefined__"):d.set(b,"__lodash_hash_undefined__")},qa.prototype.clear=function(){this.__data__={array:[],map:null}},qa.prototype["delete"]=function(b){var d=this.__data__,a=d.array;return a?$a(a,b):d.map["delete"](b)},qa.prototype.get=function(b){var d=this.__data__,a=d.array;return a?ob(a,b):d.map.get(b)},qa.prototype.has=function(b){var d=
this.__data__,a=d.array;return a?-1<db(a,b):d.map.has(b)},qa.prototype.set=function(b,d){var a=this.__data__,c=a.array;return c&&(199>c.length?Pc(c,b,d):(a.array=null,a.map=new Ba(c))),(a=a.map)&&a.set(b,d),this},vc.Cache=Ba,f.after=function(b,d){if("function"!=typeof d)throw new ba("Expected a function");return b=E(b),function(){return 1>--b?d.apply(this,arguments):void 0}},f.ary=Td,f.assign=Zf,f.assignIn=pe,f.assignInWith=nb,f.assignWith=$f,f.at=ag,f.before=Ud,f.bind=Gc,f.bindAll=qg,f.bindKey=ne,
f.castArray=function(){if(!arguments.length)return[];var b=arguments[0];return B(b)?b:[b]},f.chain=Od,f.chunk=function(b,d){d=Q(E(d),0);var a=b?b.length:0;if(!a||1>d)return[];for(var c=0,e=-1,f=Array(Gb(a/d));a>c;)f[++e]=ua(b,c,c+=d);return f},f.compact=function(b){for(var d=-1,a=b?b.length:0,c=-1,e=[];++d<a;){var f=b[d];f&&(e[++c]=f)}return e},f.concat=wf,f.cond=function(b){var d=b?b.length:0,a=y();return b=d?n(b,function(b){if("function"!=typeof b[1])throw new ba("Expected a function");return[a(b[0]),
b[1]]}):[],x(function(a){for(var c=-1;++c<d;){var e=b[c];if(g(e[0],this,a))return g(e[1],this,a)}})},f.conforms=function(b){return Qb(ia(b,!0))},f.constant=Bc,f.countBy=Pf,f.create=function(b,d){var a=Sa(b);return d?Rc(a,d):a},f.curry=Vd,f.curryRight=Wd,f.debounce=Xd,f.defaults=bg,f.defaultsDeep=cg,f.defer=Vf,f.delay=Wf,f.difference=xf,f.differenceBy=yf,f.differenceWith=zf,f.drop=Jd,f.dropRight=Kd,f.dropRightWhile=function(b,d){return b&&b.length?Ab(b,y(d,3),!0,!0):[]},f.dropWhile=function(b,d){return b&&
b.length?Ab(b,y(d,3),!0):[]},f.fill=function(b,d,a,c){var e=b?b.length:0;if(!e)return[];a&&"number"!=typeof a&&la(b,d,a)&&(a=0,c=e);e=b.length;a=E(a);0>a&&(a=-a>e?0:e+a);c=c===l||c>e?e:E(c);0>c&&(c+=e);for(c=a>c?0:de(c);c>a;)b[a++]=d;return b},f.filter=function(b,d){return(B(b)?p:Wc)(b,y(d,3))},f.flatMap=function(b,d){return K(Rd(b,d),1)},f.flatten=function(b){return b&&b.length?K(b,1):[]},f.flattenDeep=function(b){return b&&b.length?K(b,Kb):[]},f.flattenDepth=function(b,d){return b&&b.length?(d=
d===l?1:E(d),K(b,d)):[]},f.flip=function(b){return va(b,512)},f.flow=rg,f.flowRight=sg,f.fromPairs=function(b){for(var d=-1,a=b?b.length:0,c={};++d<a;){var e=b[d];c[e[0]]=e[1]}return c},f.functions=function(b){return null==b?[]:vb(b,S(b))},f.functionsIn=function(b){return null==b?[]:vb(b,ca(b))},f.groupBy=Qf,f.initial=function(b){return Kd(b,1)},f.intersection=Af,f.intersectionBy=Bf,f.intersectionWith=Cf,f.invert=dg,f.invertBy=eg,f.invokeMap=Rf,f.iteratee=pc,f.keyBy=Sf,f.keys=S,f.keysIn=ca,f.map=
Rd,f.mapKeys=function(b,d){var a={};return d=y(d,3),ka(b,function(b,c,e){a[d(b,c,e)]=b}),a},f.mapValues=function(b,d){var a={};return d=y(d,3),ka(b,function(b,c,e){a[c]=d(b,c,e)}),a},f.matches=function(b){return $c(ia(b,!0))},f.matchesProperty=function(b,d){return Zc(b,ia(d,!0))},f.memoize=vc,f.merge=gg,f.mergeWith=qe,f.method=tg,f.methodOf=ug,f.mixin=Cc,f.negate=function(b){if("function"!=typeof b)throw new ba("Expected a function");return function(){return!b.apply(this,arguments)}},f.nthArg=function(b){return b=
E(b),function(){return arguments[b]}},f.omit=hg,f.omitBy=function(b,d){return d=y(d),hd(b,function(b,a){return!d(b,a)})},f.once=function(b){return Ud(2,b)},f.orderBy=function(b,d,a,c){return null==b?[]:(B(d)||(d=null==d?[]:[d]),a=c?l:a,B(a)||(a=null==a?[]:[a]),fd(b,d,a))},f.over=vg,f.overArgs=Xf,f.overEvery=wg,f.overSome=xg,f.partial=Hc,f.partialRight=oe,f.partition=Tf,f.pick=ig,f.pickBy=function(b,d){return null==b?{}:hd(b,y(d))},f.property=ad,f.propertyOf=function(b){return function(d){return null==
b?l:Zb(b,d)}},f.pull=Df,f.pullAll=Md,f.pullAllBy=function(b,d,a){return b&&b.length&&d&&d.length?id(b,d,y(a)):b},f.pullAt=Ef,f.range=yg,f.rangeRight=zg,f.rearg=Yf,f.reject=function(b,d){var a=B(b)?p:Wc;return d=y(d,3),a(b,function(b,a,c){return!d(b,a,c)})},f.remove=function(b,d){var a=[];if(!b||!b.length)return a;var c=-1,e=[],f=b.length;for(d=y(d,3);++c<f;){var g=b[c];d(g,c,b)&&(a.push(g),e.push(c))}return jd(b,e),a},f.rest=x,f.reverse=rc,f.sampleSize=Sd,f.set=function(b,d,a){return null==b?b:gc(b,
d,a)},f.setWith=function(b,d,a,c){return c="function"==typeof c?c:l,null==b?b:gc(b,d,a,c)},f.shuffle=function(b){return Sd(b,4294967295)},f.slice=function(b,d,a){var c=b?b.length:0;return c?(a&&"number"!=typeof a&&la(b,d,a)?(d=0,a=c):(d=null==d?0:E(d),a=a===l?c:E(a)),ua(b,d,a)):[]},f.sortBy=Uf,f.sortedUniq=function(b){return b&&b.length?ld(b):[]},f.sortedUniqBy=function(b,d){return b&&b.length?ld(b,y(d)):[]},f.split=function(b,d,a){return G(b).split(d,a)},f.spread=function(b,d){if("function"!=typeof b)throw new ba("Expected a function");
return d=d===l?0:Q(E(d),0),x(function(a){var c=a[d];return a=a.slice(0,d),c&&t(a,c),g(b,this,a)})},f.tail=function(b){return Jd(b,1)},f.take=function(b,d,a){return b&&b.length?(d=a||d===l?1:E(d),ua(b,0,0>d?0:d)):[]},f.takeRight=function(b,d,a){var c=b?b.length:0;return c?(d=a||d===l?1:E(d),d=c-d,ua(b,0>d?0:d,c)):[]},f.takeRightWhile=function(b,d){return b&&b.length?Ab(b,y(d,3),!1,!0):[]},f.takeWhile=function(b,d){return b&&b.length?Ab(b,y(d,3)):[]},f.tap=function(b,d){return d(b),b},f.throttle=function(b,
d,a){var c=!0,e=!0;if("function"!=typeof b)throw new ba("Expected a function");return M(a)&&(c="leading"in a?!!a.leading:c,e="trailing"in a?!!a.trailing:e),Xd(b,d,{leading:c,maxWait:d,trailing:e})},f.thru=Ib,f.toArray=uc,f.toPairs=Dd,f.toPairsIn=function(b){return Y(b,ca(b))},f.toPath=function(b){return B(b)?n(b,String):Sc(b)},f.toPlainObject=ed,f.transform=function(b,d,a){var c=B(b)||Ta(b);if(d=y(d,4),null==a)if(c||M(b)){var f=b.constructor;a=c?B(b)?new f:[]:da(f)?Sa(wb(b)):{}}else a={};return(c?
e:ka)(b,function(b,c,e){return d(a,b,c,e)}),a},f.unary=function(b){return Td(b,1)},f.union=Ff,f.unionBy=Gf,f.unionWith=Hf,f.uniq=function(b){return b&&b.length?Ja(b):[]},f.uniqBy=function(b,d){return b&&b.length?Ja(b,y(d)):[]},f.uniqWith=function(b,d){return b&&b.length?Ja(b,l,d):[]},f.unset=function(b,d){var a;if(null==b)a=!0;else{a=b;var c=d,c=ta(c,a)?[c+""]:Fa(c);a=hb(a,c);c=U(c);a=null!=a&&ee(a,c)?delete a[c]:!0}return a},f.unzip=sc,f.unzipWith=Nd,f.values=Jb,f.valuesIn=function(b){return null==
b?[]:ya(b,ca(b))},f.without=If,f.words=ud,f.wrap=function(b,d){return d=null==d?ha:d,Hc(d,b)},f.xor=Jf,f.xorBy=Kf,f.xorWith=Lf,f.zip=Mf,f.zipObject=function(b,d){return nd(b||[],d||[],tb)},f.zipObjectDeep=function(b,d){return nd(b||[],d||[],gc)},f.zipWith=Nf,f.extend=pe,f.extendWith=nb,Cc(f,f),f.add=function(b,d){var a;return b===l&&d===l?0:(b!==l&&(a=b),d!==l&&(a=a===l?d:a+d),a)},f.attempt=re,f.camelCase=jg,f.capitalize=Ac,f.ceil=Ag,f.clamp=function(b,d,a){return a===l&&(a=d,d=l),a!==l&&(a=R(a),
a=a===a?a:0),d!==l&&(d=R(d),d=d===d?d:0),Ra(R(b),d,a)},f.clone=function(b){return ia(b)},f.cloneDeep=function(b){return ia(b,!0)},f.cloneDeepWith=function(b,a){return ia(b,!0,a)},f.cloneWith=function(b,a){return ia(b,!1,a)},f.deburr=vd,f.endsWith=function(b,a,c){b=G(b);a="string"==typeof a?a:a+"";var e=b.length;return c=c===l?e:Ra(E(c),0,e),c-=a.length,0<=c&&b.indexOf(a,c)==c},f.eq=ra,f.escape=function(b){return(b=G(b))&&Dg.test(b)?b.replace(se,ve):b},f.escapeRegExp=function(b){return(b=G(b))&&Eg.test(b)?
b.replace(Fc,"\\$&"):b},f.every=function(b,a,c){var e=B(b)?v:Rb;return c&&la(b,a,c)&&(a=l),e(b,y(a,3))},f.find=function(b,a){if(a=y(a,3),B(b)){var c=C(b,a);return-1<c?b[c]:l}return u(b,a,sa)},f.findIndex=function(b,a){return b&&b.length?C(b,y(a,3)):-1},f.findKey=function(b,a){return u(b,y(a,3),ka,!0)},f.findLast=function(b,a){if(a=y(a,3),B(b)){var c=C(b,a,!0);return-1<c?b[c]:l}return u(b,a,tc)},f.findLastIndex=function(b,a){return b&&b.length?C(b,y(a,3),!0):-1},f.findLastKey=function(b,a){return u(b,
y(a,3),Yb,!0)},f.floor=Bg,f.forEach=Pd,f.forEachRight=Qd,f.forIn=function(b,a){return null==b?b:Xb(b,Ea(a),ca)},f.forInRight=function(b,a){return null==b?b:Xc(b,Ea(a),ca)},f.forOwn=function(b,a){return b&&ka(b,Ea(a))},f.forOwnRight=function(b,a){return b&&Yb(b,Ea(a))},f.get=fb,f.gt=wc,f.gte=function(b,a){return b>=a},f.has=ee,f.hasIn=dd,f.head=Ld,f.identity=ha,f.includes=function(b,a,c,e){return b=ea(b)?b:Jb(b),c=c&&!e?E(c):0,e=b.length,0>c&&(c=Q(e+c,0)),Ka(b)?e>=c&&-1<b.indexOf(a,c):!!e&&-1<q(b,
a,c)},f.indexOf=function(b,a,c){var e=b?b.length:0;return e?(c=E(c),0>c&&(c=Q(e+c,0)),q(b,a,c)):-1},f.inRange=function(b,a,c){return a=R(a)||0,c===l?(c=a,a=0):c=R(c)||0,b=R(b),b>=fa(a,c)&&b<Q(a,c)},f.invoke=fg,f.isArguments=Ha,f.isArray=B,f.isArrayBuffer=function(b){return O(b)&&"[object ArrayBuffer]"==V.call(b)},f.isArrayLike=ea,f.isArrayLikeObject=P,f.isBoolean=function(b){return!0===b||!1===b||O(b)&&"[object Boolean]"==V.call(b)},f.isBuffer=Tc,f.isDate=function(b){return O(b)&&"[object Date]"==
V.call(b)},f.isElement=function(b){return!!b&&1===b.nodeType&&O(b)&&!dc(b)},f.isEmpty=function(b){if(ea(b)&&(B(b)||Ka(b)||da(b.splice)||Ha(b)))return!b.length;for(var a in b)if(N.call(b,a))return!1;return!0},f.isEqual=function(b,a){return Ia(b,a)},f.isEqualWith=function(b,a,c){var e=(c="function"==typeof c?c:l)?c(b,a):l;return e===l?Ia(b,a,c):!!e},f.isError=xc,f.isFinite=function(b){return"number"==typeof b&&of(b)},f.isFunction=da,f.isInteger=Zd,f.isLength=kb,f.isMap=function(b){return O(b)&&"[object Map]"==
ja(b)},f.isMatch=function(b,a){return b===a||bc(b,a,cc(a))},f.isMatchWith=function(b,a,c){return c="function"==typeof c?c:l,bc(b,a,cc(a),c)},f.isNaN=function(b){return ae(b)&&b!=+b},f.isNative=Ed,f.isNil=function(b){return null==b},f.isNull=function(b){return null===b},f.isNumber=ae,f.isObject=M,f.isObjectLike=O,f.isPlainObject=dc,f.isRegExp=be,f.isSafeInteger=function(b){return Zd(b)&&-9007199254740991<=b&&9007199254740991>=b},f.isSet=function(b){return O(b)&&"[object Set]"==ja(b)},f.isString=Ka,
f.isSymbol=ce,f.isTypedArray=Ta,f.isUndefined=function(b){return b===l},f.isWeakMap=function(b){return O(b)&&"[object WeakMap]"==ja(b)},f.isWeakSet=function(b){return O(b)&&"[object WeakSet]"==V.call(b)},f.join=function(b,a){return b?pf.call(b,a):""},f.kebabCase=kg,f.last=U,f.lastIndexOf=function(b,a,c){var e=b?b.length:0;if(!e)return-1;var f=e;if(c!==l&&(f=E(c),f=(0>f?Q(e+f,0):fa(f,e-1))+1),a!==a)return Lc(b,f,!0);for(;f--;)if(b[f]===a)return f;return-1},f.lowerCase=lg,f.lowerFirst=mg,f.lt=yc,f.lte=
function(b,a){return a>=b},f.max=function(b){return b&&b.length?z(b,ha,wc):l},f.maxBy=function(b,a){return b&&b.length?z(b,y(a),wc):l},f.mean=function(b){return ge(b)/(b?b.length:0)},f.min=function(b){return b&&b.length?z(b,ha,yc):l},f.minBy=function(b,a){return b&&b.length?z(b,y(a),yc):l},f.noConflict=function(){return ma._===this&&(ma._=mf),this},f.noop=Dc,f.now=mb,f.pad=function(b,a,c){b=G(b);a=E(a);var e=cb(b);return a&&a>e?(e=(a-e)/2,a=yb(e),e=Gb(e),Fb("",a,c)+b+Fb("",e,c)):b},f.padEnd=function(b,
a,c){return b=G(b),b+Fb(b,a,c)},f.padStart=function(b,a,c){return b=G(b),Fb(b,a,c)+b},f.parseInt=function(b,a,c){return c||null==a?a=0:a&&(a=+a),b=G(b).replace(zc,""),qf(b,a||(Fg.test(b)?16:10))},f.random=function(b,a,c){if(c&&"boolean"!=typeof c&&la(b,a,c)&&(a=c=l),c===l&&("boolean"==typeof a?(c=a,a=l):"boolean"==typeof b&&(c=b,b=l)),b===l&&a===l?(b=0,a=1):(b=R(b)||0,a===l?(a=b,b=0):a=R(a)||0),b>a){var e=b;b=a;a=e}return c||b%1||a%1?(c=kd(),fa(b+c*(a-b+Gg("1e-"+((c+"").length-1))),a)):fc(b,a)},f.reduce=
function(b,a,c){var e=B(b)?w:F,f=3>arguments.length;return e(b,y(a,4),c,f,sa)},f.reduceRight=function(b,a,c){var e=B(b)?H:F,f=3>arguments.length;return e(b,y(a,4),c,f,tc)},f.repeat=zd,f.replace=function(){var b=arguments,a=G(b[0]);return 3>b.length?a:a.replace(b[1],b[2])},f.result=function(b,a,c){if(ta(a,b))e=null==b?l:b[a];else{a=Fa(a);var e=fb(b,a);b=hb(b,a)}return e===l&&(e=c),da(e)?e.call(b):e},f.round=Cg,f.runInContext=Nc,f.sample=function(b){b=ea(b)?b:Jb(b);var a=b.length;return 0<a?b[fc(0,
a-1)]:l},f.size=function(b){if(null==b)return 0;if(ea(b)){var a=b.length;return a&&Ka(b)?cb(b):a}return S(b).length},f.snakeCase=ng,f.some=function(b,a,c){var e=B(b)?A:He;return c&&la(b,a,c)&&(a=l),e(b,y(a,3))},f.sortedIndex=function(b,a){return zb(b,a)},f.sortedIndexBy=function(b,a,c){return hc(b,a,y(c))},f.sortedIndexOf=function(b,a){var c=b?b.length:0;if(c){var e=zb(b,a);if(c>e&&ra(b[e],a))return e}return-1},f.sortedLastIndex=function(b,a){return zb(b,a,!0)},f.sortedLastIndexBy=function(b,a,c){return hc(b,
a,y(c),!0)},f.sortedLastIndexOf=function(b,a){if(b&&b.length){var c=zb(b,a,!0)-1;if(ra(b[c],a))return c}return-1},f.startCase=og,f.startsWith=function(b,a,c){return b=G(b),c=Ra(E(c),0,b.length),b.lastIndexOf(a,c)==c},f.subtract=function(b,a){var c;return b===l&&a===l?0:(b!==l&&(c=b),a!==l&&(c=c===l?a:c-a),c)},f.sum=ge,f.sumBy=function(b,a){return b&&b.length?ab(b,y(a)):0},f.template=function(b,a,c){var e=f.templateSettings;c&&la(b,a,c)&&(a=l);b=G(b);a=nb({},a,e,Ub);c=nb({},a.imports,e.imports,Ub);
var g,k,h=S(c),n=ya(c,h),p=0;c=a.interpolate||Nb;var q="__p+='";c=Ec((a.escape||Nb).source+"|"+c.source+"|"+(c===me?Hg:Nb).source+"|"+(a.evaluate||Nb).source+"|$","g");var r="sourceURL"in a?"//# sourceURL="+a.sourceURL+"\n":"";if(b.replace(c,function(a,d,c,e,f,h){return c||(c=e),q+=b.slice(p,h).replace(Ig,we),d&&(g=!0,q+="'+__e("+d+")+'"),f&&(k=!0,q+="';"+f+";\n__p+='"),c&&(q+="'+((__t=("+c+"))==null?'':__t)+'"),p=h+a.length,a}),q+="';",(a=a.variable)||(q="with(obj){"+q+"}"),q=(k?q.replace(Jg,""):
q).replace(Kg,"$1").replace(Lg,"$1;"),q="function("+(a||"obj")+"){"+(a?"":"obj||(obj={});")+"var __t,__p=''"+(g?",__e=_.escape":"")+(k?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+q+"return __p}",a=re(function(){return Function(h,r+"return "+q).apply(l,n)}),a.source=q,xc(a))throw a;return a},f.times=function(b,a){if(b=E(b),1>b||9007199254740991<b)return[];var c=4294967295,e=fa(b,4294967295);a=Ea(a);b-=4294967295;for(e=Na(e,a);++c<b;)a(c);return e},f.toInteger=E,f.toLength=
de,f.toLower=function(b){return G(b).toLowerCase()},f.toNumber=R,f.toSafeInteger=function(b){return Ra(E(b),-9007199254740991,9007199254740991)},f.toString=G,f.toUpper=function(b){return G(b).toUpperCase()},f.trim=function(b,a,c){return(b=G(b))?c||a===l?b.replace(zc,""):(a+="")?(b=b.match(aa),a=a.match(aa),b.slice(ga(b,a),Jc(b,a)+1).join("")):b:b},f.trimEnd=function(b,a,c){return(b=G(b))?c||a===l?b.replace(Mg,""):(a+="")?(b=b.match(aa),b.slice(0,Jc(b,a.match(aa))+1).join("")):b:b},f.trimStart=function(b,
a,c){return(b=G(b))?c||a===l?b.replace(Ng,""):(a+="")?(b=b.match(aa),b.slice(ga(b,a.match(aa))).join("")):b:b},f.truncate=function(b,a){var c=30,e="...";if(M(a))var f="separator"in a?a.separator:f,c="length"in a?E(a.length):c,e="omission"in a?G(a.omission):e;b=G(b);var g=b.length;if(qb.test(b))var k=b.match(aa),g=k.length;if(c>=g)return b;if(g=c-cb(e),1>g)return e;if(c=k?k.slice(0,g).join(""):b.slice(0,g),f===l)return c+e;if(k&&(g+=c.length-g),be(f)){if(b.slice(g).search(f)){var h=c;f.global||(f=
Ec(f.source,G(Gd.exec(f))+"g"));for(f.lastIndex=0;k=f.exec(h);)var n=k.index;c=c.slice(0,n===l?g:n)}}else b.indexOf(f,g)!=g&&(f=c.lastIndexOf(f),-1<f&&(c=c.slice(0,f)));return c+e},f.unescape=function(b){return(b=G(b))&&Og.test(b)?b.replace(te,xe):b},f.uniqueId=function(b){var a=++lf;return G(b)+a},f.upperCase=pg,f.upperFirst=fe,f.each=Pd,f.eachRight=Qd,f.first=Ld,Cc(f,function(){var b={};return ka(f,function(a,c){N.call(f.prototype,c)||(b[c]=a)}),b}(),{chain:!1}),f.VERSION="4.5.1",e("bind bindKey curry curryRight partial partialRight".split(" "),
function(b){f[b].placeholder=f}),e(["drop","take"],function(b,a){D.prototype[b]=function(c){var e=this.__filtered__;if(e&&!a)return new D(this);c=c===l?1:Q(E(c),0);var f=this.clone();return e?f.__takeCount__=fa(c,f.__takeCount__):f.__views__.push({size:fa(c,4294967295),type:b+(0>f.__dir__?"Right":"")}),f};D.prototype[b+"Right"]=function(a){return this.reverse()[b](a).reverse()}}),e(["filter","map","takeWhile"],function(b,a){var c=a+1,e=1==c||3==c;D.prototype[b]=function(b){var a=this.clone();return a.__iteratees__.push({iteratee:y(b,
3),type:c}),a.__filtered__=a.__filtered__||e,a}}),e(["head","last"],function(b,a){var c="take"+(a?"Right":"");D.prototype[b]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(b,a){var c="drop"+(a?"":"Right");D.prototype[b]=function(){return this.__filtered__?new D(this):this[c](1)}}),D.prototype.compact=function(){return this.filter(ha)},D.prototype.find=function(b){return this.filter(b).head()},D.prototype.findLast=function(b){return this.reverse().find(b)},D.prototype.invokeMap=
x(function(b,a){return"function"==typeof b?new D(this):this.map(function(c){return gb(c,b,a)})}),D.prototype.reject=function(b){return b=y(b,3),this.filter(function(a){return!b(a)})},D.prototype.slice=function(b,a){b=E(b);var c=this;return c.__filtered__&&(0<b||0>a)?new D(c):(0>b?c=c.takeRight(-b):b&&(c=c.drop(b)),a!==l&&(a=E(a),c=0>a?c.dropRight(-a):c.take(a-b)),c)},D.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},D.prototype.toArray=function(){return this.take(4294967295)},
ka(D.prototype,function(b,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),e=/^(?:head|last)$/.test(a),g=f[e?"take"+("last"==a?"Right":""):a],k=e||/^find/.test(a);g&&(f.prototype[a]=function(){var a=this.__wrapped__,d=e?[1]:arguments,h=a instanceof D,n=d[0],p=h||B(a),q=function(b){return b=g.apply(f,t([b],d)),e&&r?b[0]:b};p&&c&&"function"==typeof n&&1!=n.length&&(h=p=!1);var r=this.__chain__,u=!!this.__actions__.length,n=k&&!r,h=h&&!u;return!k&&p?(a=h?a:new D(this),a=b.apply(a,d),a.__actions__.push({func:Ib,
args:[q],thisArg:l}),new Z(a,r)):n&&h?b.apply(this,d):(a=this.thru(q),n?e?a.value()[0]:a.value():a)})}),e("pop push shift sort splice unshift".split(" "),function(b){var a=Lb[b],c=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",e=/^(?:pop|shift)$/.test(b);f.prototype[b]=function(){var b=arguments;return e&&!this.__chain__?a.apply(this.value(),b):this[c](function(c){return a.apply(c,b)})}}),ka(D.prototype,function(b,a){var c=f[a];if(c){var e=c.name+"";(jb[e]||(jb[e]=[])).push({name:a,func:c})}}),jb[Db(l,
2).name]=[{name:"wrapper",func:l}],D.prototype.clone=function(){var b=new D(this.__wrapped__);return b.__actions__=T(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=T(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=T(this.__views__),b},D.prototype.reverse=function(){if(this.__filtered__){var b=new D(this);b.__dir__=-1;b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b},D.prototype.value=function(){var b,a=this.__wrapped__.value(),
c=this.__dir__,e=B(a),f=0>c,g=e?a.length:0;b=0;for(var k=g,h=this.__views__,n=-1,l=h.length;++n<l;){var p=h[n],q=p.size;switch(p.type){case "drop":b+=q;break;case "dropRight":k-=q;break;case "take":k=fa(k,b+q);break;case "takeRight":b=Q(b,k-q)}}if(b={start:b,end:k},k=b.start,h=b.end,b=h-k,f=f?h:k-1,k=this.__iteratees__,h=k.length,n=0,l=fa(b,this.__takeCount__),!e||200>g||g==b&&l==b)return md(a,this.__actions__);e=[];a:for(;b--&&l>n;){f+=c;g=-1;for(p=a[f];++g<h;){var r=k[g],q=r.type,r=(0,r.iteratee)(p);
if(2==q)p=r;else if(!r){if(1==q)continue a;break a}}e[n++]=p}return e},f.prototype.at=Of,f.prototype.chain=function(){return Od(this)},f.prototype.commit=function(){return new Z(this.value(),this.__chain__)},f.prototype.flatMap=function(b){return this.map(b).flatten()},f.prototype.next=function(){this.__values__===l&&(this.__values__=uc(this.value()));var b=this.__index__>=this.__values__.length,a=b?l:this.__values__[this.__index__++];return{done:b,value:a}},f.prototype.plant=function(b){for(var a,
c=this;c instanceof W;){var e=Oc(c);e.__index__=0;e.__values__=l;a?f.__wrapped__=e:a=e;var f=e,c=c.__wrapped__}return f.__wrapped__=b,a},f.prototype.reverse=function(){var b=this.__wrapped__;return b instanceof D?(this.__actions__.length&&(b=new D(this)),b=b.reverse(),b.__actions__.push({func:Ib,args:[rc],thisArg:l}),new Z(b,this.__chain__)):this.thru(rc)},f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=function(){return md(this.__wrapped__,this.__actions__)},La&&(f.prototype[La]=Se),f}var l,
Kb=1/0,$e=NaN,Jg=/\b__p\+='';/g,Kg=/\b(__p\+=)''\+/g,Lg=/(__e\(.*?\)|\b__t\))\+'';/g,te=/&(?:amp|lt|gt|quot|#39|#96);/g,se=/[&<>"'`]/g,Og=RegExp(te.source),Dg=RegExp(se.source),uf=/<%-([\s\S]+?)%>/g,vf=/<%([\s\S]+?)%>/g,me=/<%=([\s\S]+?)%>/g,Oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ne=/^\w*$/,Pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,Fc=/[\\^$.*+?()[\]{}|]/g,Eg=RegExp(Fc.source),zc=/^\s+|\s+$/g,Ng=/^\s+/,Mg=/\s+$/,Qe=/\\(\\)?/g,Hg=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
Gd=/\w*$/,Fg=/^0x/i,Ze=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,Ue=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Sb=/^(?:0|[1-9]\d*)$/,cf=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Nb=/($^)/,Ig=/['\n\r\u2028\u2029\\]/g,df=/[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]/g,aa=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
qb=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ufe0e\ufe0f]/,gf=/[a-zA-Z0-9]+/g,ff=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+|[A-Z\xc0-\xd6\xd8-\xde]+|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
ef=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hf="Array Buffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),J={};J["[object Float32Array]"]=J["[object Float64Array]"]=J["[object Int8Array]"]=J["[object Int16Array]"]=J["[object Int32Array]"]=J["[object Uint8Array]"]=J["[object Uint8ClampedArray]"]=
J["[object Uint16Array]"]=J["[object Uint32Array]"]=!0;J["[object Arguments]"]=J["[object Array]"]=J["[object ArrayBuffer]"]=J["[object Boolean]"]=J["[object Date]"]=J["[object Error]"]=J["[object Function]"]=J["[object Map]"]=J["[object Number]"]=J["[object Object]"]=J["[object RegExp]"]=J["[object Set]"]=J["[object String]"]=J["[object WeakMap]"]=!1;var I={};I["[object Arguments]"]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=
I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I["[object Object]"]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0;I["[object Error]"]=I["[object Function]"]=I["[object WeakMap]"]=!1;var Pb={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A",
"\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o",
"\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},Qb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Tb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},W={"function":!0,object:!0},Rb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gg=parseFloat,Ye=parseInt,
xa=W[typeof exports]&&exports&&!exports.nodeType?exports:l,oa=W[typeof module]&&module&&!module.nodeType?module:l,he=oa&&oa.exports===xa?xa:l,Ic=pa(xa&&oa&&"object"==typeof global&&global),ob=pa(W[typeof self]&&self),$a=pa(W[typeof window]&&window),W=pa(W[typeof this]&&this),ma=Ic||$a!==(W&&W.window)&&$a||ob||W||Function("return this")(),Da=Nc();($a||ob||{})._=Da;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("third_party/lo-dash/lo-dash.min",[],function(){return Da}):xa&&
oa?(he&&((oa.exports=Da)._=Da),xa._=Da):ma._=Da}).call(this);
define("qowtRoot/errors/localisedError",["qowtRoot/utils/typeUtils","qowtRoot/utils/i18n","third_party/lo-dash/lo-dash.min"],function(h,c){var g=function(a){a=a||"";this.name="LocalisedError";h.isObject(a)&&_.extend(this,a);this.message=(this.code?this.code+": ":"")+(this.message||JSON.stringify(a)||this.title||this.details||this.additionalInfo);this.title=c.getMessage(this.title);this.details=a.fileName?c.getMessage(this.details,a.fileName):c.getMessage(this.details);this.linkData&&this.linkData.msg&&
(this.linkData.msg=c.getMessage(this.linkData.msg)||this.linkData.msg);Error.captureStackTrace(this,g)};g.prototype=Object.create(Error.prototype);return g.prototype.constructor=g});define("qowtRoot/errors/qowtException",["qowtRoot/errors/localisedError"],function(h){var c=function(){h.apply(this,arguments);this.name="QOWTException";Error.captureStackTrace(this,c);this.fatal=!0};c.prototype=Object.create(h.prototype);c.prototype.constructor=c;return window.QOWTException=c});
define("background/store/fileDetails",["qowtRoot/utils/typeUtils","qowtRoot/errors/qowtException"],function(h,c){var g=function(a){this.mimeType=a.mimeType||a.mimeType_;this.streamURL=a.streamURL||a.streamURL_;this.originalURL=a.originalURL||a.originalURL_;this.preferredFilename=a.preferredFilename||a.preferredFilename_;this.driveDocId=a.driveDocId||a.driveDocId_;this.userFile=a.userFile||a.userFile_;this.newDocument=a.newDocument;this.tabId=a.tabId||a.tabId_;this.privateFilePath=a.privateFilePath||
a.privateFilePath_;this.downloadFilePath=a.downloadFilePath||a.downloadFilePath_;this.timestamp=a.timestamp||a.timestamp_;this.observerFunc_=void 0;Object.seal(this)};g.prototype=Object.create(Object.prototype,{tabId:{set:function(a){this.tabId_=a;this.invokeObserver_()},get:function(){return this.tabId_}},privateFilePath:{set:function(a){this.privateFilePath_=a;this.invokeObserver_()},get:function(){return this.privateFilePath_}},downloadFilePath:{set:function(a){this.downloadFilePath_=a;this.invokeObserver_()},
get:function(){return this.downloadFilePath_}},timestamp:{set:function(a){this.timestamp_=a;this.invokeObserver_()},get:function(){return this.timestamp_}},mimeType:{set:function(a){this.mimeType_=a;this.invokeObserver_()},get:function(){return this.mimeType_}},streamURL:{set:function(a){this.streamURL_=a;this.invokeObserver_()},get:function(){return this.streamURL_}},originalURL:{set:function(a){this.originalURL_=a;this.invokeObserver_()},get:function(){return this.originalURL_}},preferredFilename:{set:function(a){this.preferredFilename_=
a;this.invokeObserver_()},get:function(){return this.preferredFilename_}},userFile:{set:function(a){this.userFile_=a;this.invokeObserver_()},get:function(){return this.userFile_}},driveDocId:{set:function(a){this.driveDocId_=a;this.invokeObserver_()},get:function(){return this.driveDocId_}}});g.prototype.constructor=g;g.prototype.addObserver=function(a){if(!h.isFunction(a))throw new c("Non-function observer provided to FileDetails object");this.observerFunc_=a};g.prototype.hasExpired=function(){return!this.tabId&&
(new Date).getTime()-this.timestamp>a};g.prototype.toJSON=function(){var a=_.extend({},this);a.userFile_=void 0;return a};var a=7776E6;g.prototype.invokeObserver_=function(){this.observerFunc_&&this.observerFunc_()};return g});
define("qowtRoot/utils/localStorageManager",["qowtRoot/errors/qowtException"],function(h){return{setItem:function(c,g){try{window.localStorage.setItem(c,g)}catch(a){throw new h({title:"storage_quota_exceed_error_short_msg",details:"storage_quota_exceed_error_msg",message:a.message});}},getItem:function(c){return window.localStorage.getItem(c)}}});
define("qowtRoot/utils/uuid",[],function(){return{generateUUID:function(){var h=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var g=(h+16*Math.random())%16|0;h=Math.floor(h/16);return("x"===c?g:g&7|8).toString(16)})}}});
define("background/store/fileStore",["background/store/fileDetails","qowtRoot/utils/localStorageManager","qowtRoot/utils/uuid"],function(h,c,g){var a={init:function(){try{e=(e=c.getItem("qo_file_store"))?JSON.parse(e):{}}catch(a){e={},console.warn("Failed to initialize file store so resetting it to be empty: "+a)}for(var g in e){var r=new h(e[g]);r.addObserver(v);e[g]=r}},addEntry:function(a){var c;a instanceof h&&(a.addObserver(v),c=g.generateUUID(),e[c]=a,v());return c},getEntry:function(a){return e[a]},
findTabId:function(a){var c=[];if(a)for(var g in e)e[g].tabId===a&&c.push(g);return 0<c.length?c:void 0},removeAllTabIds:function(){for(var a in e)e[a].tabId=void 0},deleteOrphans:function(a){for(var c=[],g=a.length,h=0;h<g;h++){var t=a[h];if(!t.isDirectory){var t=t.fullPath,w;w=void 0;if(t){var H=void 0;for(H in e)if(e[H].privateFilePath===t||e[H].downloadFilePath===t){w=H;break}}if(!e[w]||e[w].hasExpired())c.push(t),delete e[w]}}v();return c},window__:function(){return window}},e,v=function(){var g;
a.window__()&&(g=JSON.stringify(e),c.setItem("qo_file_store",g))};return a});
define("background/fileReaper",["background/store/fileStore","qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when","qowtRoot/features/utils","third_party/lo-dash/lo-dash.min"],function(h,c,g,a){var e={init:function(){g(t()).then(w)},addLock:function(a){k.push(a)},removeLock:function(a){a=k.indexOf(a);-1!==a&&k.splice(a,1)}},v,p=!1,r=[],k=[],n=0,t=function(){var a;return function(){var c=g.defer();a?c.resolve(a):window.webkitRequestFileSystem(window.TEMPORARY,1048576,function(e){a=e;c.resolve(a)},
function(){c.reject(Error("File Reaper failed to access the file system"))});return c.promise}}(),w=function(){var a=_.throttle(H,3E4);chrome.tabs.onRemoved.addListener(function(c){e.removeLock(c);h.findTabId(c)&&a()})},H=function(){n||0<k.length||a.isEnabled("suppressFileReapear")||(h.removeAllTabIds(),p=!1,v=window.setTimeout(z,3E5),chrome.windows.getAll({populate:!0},function(a){for(var c=a.length,e=0;e<c;e++)a[e].tabs.forEach(function(a){n++;chrome.tabs.sendMessage(a.id,"reaperCheck",A.bind(this,
a.id))})}))},A=function(a,c){if(p)F(c)&&console.warn("Reaper received a belated Quickoffice tab response - this may result in its private temp file being incorrectly deleted");else{if(F(c)){var e=h.getEntry(c.uuid);e&&(e.tabId=a)}1===n?(window.clearTimeout(v),0<k.length?n=0:u()):n--}},z=function(){p=!0;0<k.length?n=0:u()},u=function(){g(t()).then(function(a){r=[];var c=a.root.createReader(),e=function(){c.readEntries(function(a){0<a.length?(a.forEach(function(a){r.push(a)}),e()):C(r)},C)};e()})},
C=function(a){0<k.length||!c.isList(a)||h.deleteOrphans(a).forEach(function(a){q(a)});n=0},q=function(a){a&&g(t()).then(function(c){c.root.getFile(a,{create:!1},function(c){c.remove(function(){console.log("File Reaper has deleted file "+a)})})})},F=function(a){return c.isObject(a)&&a.hasOwnProperty("uuid")};return e});
define("utils/logUtils",["qowtRoot/utils/typeUtils"],function(h){return{logError:function(c){c&&c.stack?h.isList(c.stack)?(console.error(c.message),c.stack.forEach(function(c){console.error(c.toString())})):console.error(c.stack):console.error(c)}}});
define("background/chromeHandler",["background/store/fileStore","background/store/fileDetails","background/fileReaper","utils/logUtils","qowtRoot/third_party/when/when"],function(h,c,g,a,e){function v(c,g,h){var v=c.length,q=[];return g?t(g,c[0],h):r().catch(function(){return p()}).catch(function(){return k()}).then(function(a){if(H(a)){for(var g=0;g<v;g++)0===g&&a.useTabId?q.push(t(a.useTabId,c[g],h)):q.push(n(a.id,c[g],h));return e.all(q)}throw Error("Could not find valid window");}).catch(a.logError)}
function p(){return e.promise(function(a,c){chrome.windows.getLastFocused({populate:!1},function(e){H(e)?a(e):c(Error("invalid window"))})})}function r(){return e.promise(function(a,c){chrome.windows.getCurrent({populate:!1},function(e){H(e)?a(e):c(Error("invalid window"))})})}function k(){return e.promise(function(a,c){chrome.windows.create({type:"normal",focused:!0},function(e){H(e)?(e.useTabId=e.tabs[0].id,a(e)):c(Error("invalid window"))})})}function n(a,c,g){var k={active:g?g:!1,windowId:a,url:"../views/app.html?uuid="+
c};return e.promise(function(a){chrome.tabs.create(k,a)})}function t(a,c,g){var k={active:g?g:!1,url:"../views/app.html?uuid="+c};return e.promise(function(e,g){var n=h.getEntry(c);n?(n.tabId=a,chrome.tabs.update(a,k,e)):g()})}function w(a){return a&&void 0!==a.id}g.init();var H=function(a){return a&&void 0!==a.id&&!a.incognito};return{handleIncomingMsg:function(a,c){"driveEnabled"===c.msg&&a.postMessage({driveEnabled:!0,supportsTeamDrives:!0})},handleChromeOSFile:function(a){var g,k=e.reject(Error("No file entries were passed to open"));
H=w;if(a){g=[];for(var n=0;n<a.length;++n){var q=new c({userFile:a[n].entry});g.push(h.addEntry(q))}g=v(g,void 0,!0)}return g||k},handleDriveDoc:function(a){var g,k,n=e.reject(Error("No drive doc ids were passed to open"));if(a){k=[];for(var q=0;q<a.length;++q){var p=new c({driveDocId:a[q]}),p=h.addEntry(p);0===q?g=p:k.push(p)}k=0===k.length?e.resolve(g):v(k).yield(g)}return k||n},handleNewCreate:function(a,g){var k=e.reject(Error("No file type was passed."));H=w;var n=[],q=new c({newDocument:a,mimeType:g});
n.push(h.addEntry(q));return v(n,void 0,!0)||k}}});define("qowtRoot/models/fileInfo",[],function(){return{}});
define("qowtRoot/pubsub/pubsub",["third_party/lo-dash/lo-dash.min"],function(){function h(a,e){var g=[],h=[],p=[],A=[];v[a]&&v[a].length&&(r++,v[a].forEach(function(a){a.config.after?h.push(a):g.push(a);a.config.once&&A.push(a)}),g.concat(h).forEach(function(c){p.push(c.callback(a,e))}),A.forEach(function(a){c(a.token)}));return Promise.all(p)}function c(a){var c;_.values(v).some(function(e){return e.some(function(g,h){return g.token===a?(c=e.splice(h,1)[0],!0):!1})});return c}function g(a){var c=
0;return c=a?v[a]?v[a].length:0:_.values(v).reduce(function(a,c){return a+c.length},0)}function a(){v={}}var e=Object.create(Object.prototype,{subscriberCount:{get:function(){return g()}},registeredSignals:{get:function(){return _.keys(v)}},publishCount:{get:function(){return r}}});e.subscribe=function(a,c,e){if(!_.isString(a)||!a)throw new TypeError("invalid signal");if(!_.isFunction(c))throw new TypeError("invalid callback");e=e||{};e.once=!!e.once;e.after=!!e.after;var g=(++p).toString();v[a]=
v[a]||[];v[a].push({token:g,callback:c,config:e});return g};e.publish=function(a,c){if(!_.isString(a)||!a)throw new TypeError("invalid signal");c=c||{};return h(a,c)};e.doAction=function(a,c){if(!_.isString(a)||!a)throw new TypeError("invalid action");c=c||{};c=_.isString(c)?{contentType:c}:c;return h("qowt:doAction",{action:a,context:c})};e.unsubscribe=function(a){if(void 0!==a){if(!_.isString(a)||!a)throw new TypeError("invalid token");return c(a)}};e.subscriberCountForSignal=function(a){if(!_.isString(a)||
!a)throw new TypeError("invalid signal");return g(a)};e.clear=a;e.reset=function(){a();r=p=0};var v={},p=0,r=0;return e});define("qowtRoot/models/env",[],function(){return{pointsPerEm:12,fontUnit:"pt"}});
define("qowtRoot/utils/domListener",["qowtRoot/models/env"],function(h){var c={},g=0,a=function(a,e,g,n,t){t=t||!1;e||(console.warn("invalid element supplied for addListener"),e=h.rootNode?h.rootNode:window.document);e.addEventListener(g,n,t);a&&(c[a]=c[a]||[],c[a].push({element:e,eventName:g,handlerFunction:n,useCapture:t}))},e=function(a,c,e,g){g=g||!1;a||(console.warn("invalid element supplied for removeListener"),a=h.rootNode?h.rootNode:window.document);a.removeEventListener(c,e,g)},v=function(a){if(a=
c[a])for(;0<a.length;){var g=a.pop();e(g.element,g.eventName,g.handlerFunction,g.useCapture)}};return{add:function(c,e,g,h,t){a(c,e,g,h,t)},removeGroup:function(a){v(a)},reset:function(){for(var a in c)v(a)},addListener:function(c,e,h,n){a("__DOMLISTENER"+g++,c,e,h,n)},removeListener:function(a,c,g,h){e(a,c,g,h)},dispatchEvent:function(a,c,e){a||(console.warn("invalid element supplied for dispatchEvent"),a=h.rootNode?h.rootNode:window.document);var g=document.createEvent("Event");g.initEvent(c,!0,
!1);g.detail=e;g.eventName=c;a.dispatchEvent(g)}}});
define("qowtRoot/customElements/ui/shareButton",["qowtRoot/models/fileInfo","qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(h,c,g,a){var e=Object.create(HTMLElement.prototype);e.createdCallback=function(){this.classList.add("button");this.classList.add("primary");this.classList.add("blue");h.isMacroEnabledFile&&this.classList.add("disabled");this.innerText=a.getMessage("share_button");var c=document.createElement("span");this.insertBefore(c,this.firstChild);g.addListener(this,
"mouseover",this.onMouseOver_);g.addListener(this,"mouseout",this.onMouseOut_);this.classList.contains("disabled")?this.setAttribute("aria-label",a.getMessage("disabled_share_button")):(g.addListener(this,"click",this.onClick_,!1),g.addListener(this,"keydown",this.onKeyDownHandler_,!1),g.addListener(this,"focus",this.onFocus_.bind(this),!1),this.setAttribute("aria-label",a.getMessage("share_button")));this.setAttribute("tabIndex",0);this.setAttribute("role","button")};e.appendTo=function(a){a.appendChild(this)};
e.onClick_=function(){c.publish("qowt:doAction",{action:"share",context:{contentType:"common"}})};e.onMouseOver_=function(){var a={name:"share",dimensions:this.getBoundingClientRect()};this.classList.contains("disabled")?a.name="share_for_macroenabledfiles":a.name="share";document.getElementById("main-toolbar").$.tooltip.show(a)};e.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};e.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),
this.onClick_()};e.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};e.detach=function(){g.removeListener(this,"click",this.onClick_,!1);g.removeListener(this,"mouseover",this.onMouseOver_);g.removeListener(this,"mouseout",this.onMouseOut_);g.removeListener(this,"keydown",this.onKeyDownHandler_,!1);g.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTShareButton=document.registerElement("qowt-sharebutton",{prototype:e});
return{}});
define("qowtRoot/customElements/ui/presentButton",["qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(h,c,g){var a=Object.create(HTMLElement.prototype);a.createdCallback=function(){this.classList.add("button");this.classList.add("basic");this.innerText=g.getMessage("present_button");var a=document.createElement("span");this.insertBefore(a,this.firstChild);c.addListener(this,"click",this.onClick_,!1);c.addListener(this,"mouseover",this.onMouseOver_);c.addListener(this,"mouseout",
this.onMouseOut_);c.addListener(this,"keydown",this.onKeyDownHandler_,!1);c.addListener(this,"focus",this.onFocus_.bind(this),!1);this.setAttribute("tabIndex",0);this.setAttribute("role","button");this.setAttribute("aria-label",g.getMessage("present_button"))};a.appendTo=function(a){a.appendChild(this)};a.onClick_=function(){h.publish("qowt:doAction",{action:"startSlideshow",context:{contentType:"presentation"}})};a.onMouseOver_=function(){var a={name:"presentation",dimensions:this.getBoundingClientRect()};
document.getElementById("main-toolbar").$.tooltip.show(a)};a.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};a.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),this.onClick_()};a.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};a.detach=function(){c.removeListener(this,"click",this.onClick_,!1);c.removeListener(this,"mouseover",this.onMouseOver_);
c.removeListener(this,"mouseout",this.onMouseOut_);c.removeListener(this,"keydown",this.onKeyDownHandler_,!1);c.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTPresentButton=document.registerElement("qowt-presentbutton",{prototype:a});return{}});
define("qowtRoot/customElements/ui/downloadButton",["qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(h,c,g){var a=Object.create(HTMLElement.prototype);a.createdCallback=function(){this.classList.add("button");this.classList.add("basic");this.innerText=g.getMessage("download_button");var a=document.createElement("span");this.insertBefore(a,this.firstChild);c.addListener(this,"click",this.onClick_,!1);c.addListener(this,"mouseover",this.onMouseOver_);c.addListener(this,
"mouseout",this.onMouseOut_);c.addListener(this,"keydown",this.onKeyDownHandler_,!1);c.addListener(this,"focus",this.onFocus_.bind(this),!1);this.setAttribute("tabIndex",0);this.setAttribute("role","button");this.setAttribute("aria-label",g.getMessage("download_button"))};a.appendTo=function(a){a.appendChild(this)};a.onClick_=function(){h.publish("qowt:doAction",{action:"download",context:{contentType:"common"}})};a.onMouseOver_=function(){var a={name:"download",dimensions:this.getBoundingClientRect()};
document.getElementById("main-toolbar").$.tooltip.show(a)};a.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};a.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),this.onClick_(),this.blur()};a.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};a.detach=function(){c.removeListener(this,"click",this.onClick_,!1);c.removeListener(this,"mouseover",
this.onMouseOver_);c.removeListener(this,"mouseout",this.onMouseOut_);c.removeListener(this,"keydown",this.onKeyDownHandler_,!1);c.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTDownloadButton=document.registerElement("qowt-downloadbutton",{prototype:a});return{}});
define("qowtRoot/customElements/ui/appIcon",["qowtRoot/models/env","qowtRoot/utils/i18n","qowtRoot/utils/domListener"],function(h,c,g){var a=Object.create(HTMLElement.prototype),e={word:"http://docs.google.com/document",sheet:"http://docs.google.com/spreadsheets",point:"http://docs.google.com/presentation"};a.createdCallback=function(){var a=document.createElement("a");a.href=e[h.app];a.target="_blank";a.classList.add("qowt-main-appIcon");a.setAttribute("tabindex",0);a.setAttribute("role","link");
var p=h.app+c.getMessage("app_icon_aria_spoken_word");a.setAttribute("aria-label",p);g.addListener(a,"focus",this.onFocus_.bind(this),!1);this.appendChild(a)};a.appendTo=function(a){a.appendChild(this)};a.onFocus_=function(a){if(a.path&&-1!==Array.prototype.slice.call(a.path).indexOf(this)){a=this.querySelector("a.qowt-main-appIcon").getAttribute("aria-label")+" "+this.querySelector("a.qowt-main-appIcon").getAttribute("role");var c=window.cvox;c&&c.Api.speak(a,0)}};window.QOWTAppIcon=document.registerElement("qowt-app-icon",
{prototype:a});return{}});
define("qowtRoot/configs/common",["qowtRoot/customElements/ui/shareButton","qowtRoot/customElements/ui/presentButton","qowtRoot/customElements/ui/downloadButton","qowtRoot/customElements/ui/appIcon"],function(){var h={SUPPORTED_IMAGE_FORMATS:{jpg:!0,jpeg:!0,gif:!0,png:!0,pic:!1,pict:!1,bmp:!0,tif:!0,tiff:!0},ZOOM:{current:void 0,next:void 0,levels:void 0},LAYOUT_DEFAULT_MAXZOOM:void 0,LAYOUT_DEFAULT_MINZOOM:void 0,LAYOUT_DEFAULT_ZOOM_LEVEL:void 0,DOC_VERIFY_DEBOUNCE:50,DEFAULT_COLORS:"#6B9CD4 #DE7872 #B7D37C #A48CC2 #6CC7E1 #F3AB63 #AEC8EE".split(" "),TEXT_STYLE:{defaultHighlightColor:"rgb(255, 255, 255)",
defaultTxtColor:"rgb(0, 0, 0)",shadowText:{setValue:"#000000 0.07em 0.07em 0.07em",getValue:"rgb(0, 0, 0) 0.07em 0.07em 0.07em"},outlineText:{webkitTextFillColor:"transparent",webkitTextStroke:".05em #000000",webkitTextStrokeWidth:"0.05em",webkitTextStrokeColor:"rgb(0, 0, 0)"},embossedText:{setColor:"#ffffff",getColor:"rgb(255, 255, 255)",setShadow:"#000000 1px 1px 2px",getShadow:"rgb(0, 0, 0) 1px 1px 2px"},engravedText:{setColor:"#999999",getColor:"rgb(153, 153, 153)",setShadow:"#000000 -1px -1px 2px",
getShadow:"rgb(0, 0, 0) -1px -1px 2px"}},DEFAULT_BLIP_FILL_PROPERTIES:{tileProps:{Sx:100,Sy:100,Tx:0,Ty:0,align:"TL"},type:"tileFill"},kMESSAGE_BUS_CONNECTION_RETRY:10,kMESSAGE_BUS_CONNECTION_TIMEOUT:3E4,kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG:"MessageBus: Connection timeout",create:function(){return{SUPPORTED_IMAGE_FORMATS:h.SUPPORTED_IMAGE_FORMATS,DIALOGUE_CONFIG:h.DIALOGUE_CONFIG,DEFAULT_COLORS:h.DEFAULT_COLORS,ZOOM:h.ZOOM,LAYOUT_DEFAULT_MAXZOOM:h.LAYOUT_DEFAULT_MAXZOOM,LAYOUT_DEFAULT_MINZOOM:h.LAYOUT_DEFAULT_MINZOOM,
LAYOUT_DEFAULT_ZOOM_LEVEL:h.LAYOUT_DEFAULT_ZOOM_LEVEL}}};return h});
define("qowtRoot/messageBus/messageBusImpl",["qowtRoot/utils/typeUtils","qowtRoot/configs/common","qowtRoot/third_party/when/when"],function(h,c,g){var a=function(a){this.myWin_=a||window;this.pendingConnections_=[];this.acceptedConnections_=[];this.completedConnections_=[];this.acknowledgements_=[];this.listeners_=[];this.msgQueue_=[];this.pendingMsgs_=[];this.myWin_.addEventListener("message",this.handleIncomingMessage_.bind(this),!1)};a.prototype=Object.create(Object.prototype);a.prototype.constructor=
a;a.prototype.connect=function(a,c){if(!a||null===a||!h.isObject(a)||!a.postMessage)throw Error("MessageBus: A valid HTML window object has not been provided to connect()");if(a===this.myWin_)throw Error("MessageBus: Trying to connect to its own window");if(c&&!h.isFunction(c))throw Error("MessageBus: The provided callback function is not of the correct type");for(var e=this.pendingConnections_.length,p=0;p<e;p++)if(this.pendingConnections_[p].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");
e=this.acceptedConnections_.length;for(p=0;p<e;p++)if(this.acceptedConnections_[p].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");e=this.completedConnections_.length;for(p=0;p<e;p++)if(this.completedConnections_[p].win===a)throw Error("MessageBus: Trying to connect to a window that has already been connected");e={win:a,callback:c,currentWaitTime:0,deferred:g.defer()};this.pendingConnections_.push(e);this.tryToConnect_(e);return e.deferred.promise};
a.prototype.pushMessage=function(a){if(!h.isObject(a))throw Error("MessageBus: A valid message object has not been provided to pushMessage()");var c=this.completedConnections_.length;if(0===c)this.pendingMsgs_.push(a);else{if(!h.isObject(a))throw Error("Cannot mark non-object value as quickoffice message");a.qoMessageBus=!0;this.msgQueue_.length>=e&&this.msgQueue_.shift();this.msgQueue_.push(a);for(var g=0;g<c;g++)this.completedConnections_[g].win.postMessage(a,"*")}};a.prototype.listen=function(a,
c){if(!h.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to listen()");if(c&&!h.isFunction(c))throw Error("MessageBus: The provided filter function is not of the correct type");this.listeners_.push({listener:a,filter:c})};a.prototype.stopListening=function(a){if(!h.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to stopListening()");for(var c=this.listeners_.length,e=0;e<c;e++)if(this.listeners_[e].listener===a){this.listeners_.splice(e,
1);break}};a.prototype.isConnectedTo=function(a){for(var c=!1,e=this.completedConnections_.length,g=0;g<e;g++)if(a===this.completedConnections_[g].win){c=!0;break}return c};a.prototype.tryToConnect_=function(a){a.currentWaitTime>c.kMESSAGE_BUS_CONNECTION_TIMEOUT?this.handleTimeOut_(a):(a.currentWaitTime+=c.kMESSAGE_BUS_CONNECTION_RETRY,-1!==this.pendingConnections_.indexOf(a)&&a.win.postMessage(v,"*"),a.timeoutId=setTimeout(this.tryToConnect_.bind(this,a),c.kMESSAGE_BUS_CONNECTION_RETRY))};a.prototype.handleTimeOut_=
function(a){var e=c.kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG;window.connectFromAppToQowt&&(e=window.connectFromQowtToApp?Math.abs(Math.round(window.connectFromQowtToApp-window.connectFromAppToQowt)/1E3)>Math.round(c.kMESSAGE_BUS_CONNECTION_TIMEOUT/1E3*.8)?e+":qowt too late to connect":e+":qowt and app connected:handshake failed?":e+":qowt failed to connect");a.deferred.reject(Error(e))};a.prototype.handleIncomingMessage_=function(a){if(a){if(-1!==this.msgQueue_.indexOf(a.data))throw Error("MessageBus: A message that was pushed onto thisbus has arrived back on it - we have a circular dependancy!");
a.data===v?this.handleConnectionRequestMsg_(a):a.data===p?this.handleConnectionAcceptedMsg_(a):a.data===r?this.handleConnectionAckMsg_(a):a&&a.data&&!0===a.data.qoMessageBus&&("chrome-extension://gbkeegbaiigmenfmjfclcdgdpimamgkj"===a.origin||"chrome-extension://bpmcpldpdmajfigpchkicefoigmkfalc"===a.origin||"chrome-extension://ehibbfinohgbchlgdbfpikodjaojhccn"===a.origin)&&this.handleClientMsg_(a)}};a.prototype.handleConnectionRequestMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionRequest message");
a.source.postMessage(p,"*")};a.prototype.handleConnectionAcceptedMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAccepted message");for(var c=this.pendingConnections_.length,e=0;e<c;e++)if(this.pendingConnections_[e].win===a.source){c=this.pendingConnections_.splice(e,1)[0];a=this.acknowledgements_.indexOf(a.source);-1===a?this.acceptedConnections_.push(c):(this.acknowledgements_.splice(a,1),this.connectionCompleted_(c));c.win.postMessage(r,"*");break}};a.prototype.handleConnectionAckMsg_=
function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAck message");for(var c=this.acceptedConnections_.length,e=0;e<c;e++)if(this.acceptedConnections_[e].win===a.source){a=this.acceptedConnections_.splice(e,1)[0];this.connectionCompleted_(a);return}this.acknowledgements_.push(a.source)};a.prototype.handleClientMsg_=function(a){if(a.source){for(var c=this.listeners_.slice(),e=c.length,g=0;g<e;g++){var h=c[g];!h||h.filter&&!h.filter.call(this,a)||h.listener.call(this,a)}e=
this.completedConnections_.length;for(g=0;g<e;g++)this.completedConnections_[g].win!==a.source&&this.completedConnections_[g].win.postMessage(a.data,"*")}};a.prototype.connectionCompleted_=function(a){this.completedConnections_.push(a);clearTimeout(a.timeoutId);for(a.callback&&a.callback.call(this);0<this.pendingMsgs_.length;)this.pushMessage(this.pendingMsgs_.shift());a.deferred.resolve()};var e=10,v="qoConnectionRequest",p="qoConnectionAccepted",r="qoConnectionAck";return a});
define("qowtRoot/messageBus/messageBus",["qowtRoot/messageBus/messageBusImpl"],function(h){return new h});define("qowtRoot/errors/qowtError",["qowtRoot/errors/localisedError"],function(h){var c=function(){h.apply(this,arguments);this.name="QOWTError";Error.captureStackTrace(this,c);this.fatal=!1};c.prototype=Object.create(h.prototype);c.prototype.constructor=c;return window.QOWTError=c});
define("qowtRoot/errors/qowtSilentError",["qowtRoot/errors/localisedError"],function(h){var c=function(){h.apply(this,arguments);this.name="QOWTSilentError";Error.captureStackTrace(this,c);this.fatal=!1;this.silent=!0};c.prototype=Object.create(h.prototype);c.prototype.constructor=c;return window.QOWTSilentError=c});
define("qowtRoot/errors/errorCatcher","qowtRoot/utils/typeUtils qowtRoot/messageBus/messageBus qowtRoot/pubsub/pubsub qowtRoot/errors/qowtError qowtRoot/errors/qowtSilentError qowtRoot/errors/qowtException".split(" "),function(h,c,g,a,e,v){function p(a){a.error?(console.error("%s caught js exception: %s",z,a.error.name||a.error.message?a.error.name+": "+a.error.message:a.error),console.error(a.error.stack),void 0===a.error.fatal&&(a.error.fatal=!0),k(a.error)):console.error(a)}function r(a,c){console.log("%s caught deprecated error",
z);console.log(c);c.isDeprecatedError=!0;k(c)}function k(g){if(g instanceof Error)void 0===g.fatal&&(g.fatal=!0);else{console.log("%s converting deprecated/bad error",z);switch(!0){case h.isObject(g)&&g.isDeprecatedError:var k={title:g.errorId?g.errorId+"_short_msg":void 0,details:g.errorId?g.errorId+"_msg":void 0,linkData:g.linkData,message:g.additionalInfo};g=g.fatal?new v(k):g.silent?new e(k):new a(k);break;case h.isNumber(g):g=new v({code:g});break;case h.isString(g):g=new v(g);break;default:g=
new v(g.toString())}g.stack=void 0}C.push(g);n(g);if(!g.isSynced){console.log("%s pushing error to msg bus",z);k=_.extend({},g);k.name=g.name;k.message=g.message;k.stack=g.stack;try{c.pushMessage({id:H,error:JSON.stringify(k)})}catch(p){}}}function n(a){console.log("%s dispatching error to observers",z);A.forEach(function(c){try{c.call(c,a)}catch(e){console.warn("Error observer %s threw an exception; ignored",c.name||""),console.warn(e.stack)}})}function t(a){if(a&&a.data&&a.data.error){console.log("%s receiving error from msg bus",
z);a=JSON.parse(a.data.error);var c={};-1!=="Error EvalError RangeError ReferenceError SyntaxError TypeError URIError QOWTError QOWTSilentError QOWTException".split(" ").indexOf(a.name)?(console.log("cast to %s",a.name),c=new window[a.name]):(console.log("cast fallback to Error"),c=Error());_.extend(c,a);void 0===a.stack&&(c.stack=void 0);a=c;a.isSynced=!0;k(a)}}function w(a){return a&&a.data&&a.data.id===H}var H="errorSync",A=[],z="sandbox"===window.name?"QOWT":"App",u,C=[];return{init:function(){u=
g.subscribe("qowt:error",r);window.addEventListener("error",p);c.listen(t,w);Error.stackTraceLimit=Infinity},reset:function(){g.unsubscribe(u);window.removeEventListener("error",p);c.stopListening(t);A=[]},handleError:function(a){k(a)},addObserver:function(a){h.isFunction(a)?A.push(a):console.warn("Error observer must be a function")},observers:function(){return A},lastError:function(){return C[C.length-1]}}});
define("background/pageAPI","background/fileReaper background/store/fileDetails background/store/fileStore background/chromeHandler qowtRoot/errors/errorCatcher qowtRoot/errors/qowtSilentError".split(" "),function(h,c,g,a,e,v){function p(a){if(a&&(a=a["Content-Disposition"]||a["content-disposition"]))try{return a.split("=")[1].trim().replace(/\"/g,"")}catch(c){e.handleError(new v("Failed to parse Content-Disposition Header: "+c))}}window.handleDriveDoc=function(c){return a.handleDriveDoc(c)};window.registerMimeHandlerStream=
function(a){return g.addEntry(new c({mimeType:a.mimeType,streamURL:a.streamUrl,originalURL:a.originalUrl,tabId:a.tabId,preferredFilename:p(a.responseHeaders)}))};window.getFileDetails=function(a){return g.getEntry(a)};window.addReaperLock=function(a){h.addLock(a)};window.removeReaperLock=function(a){h.removeLock(a)};window.cacheTabId=function(a,c){var e=g.getEntry(a);e&&(e.tabId=c)};window.cachePrivateFilePath=function(a,c){var e=g.getEntry(a);e&&(e.privateFilePath=c)};window.cacheDownloadFilePath=
function(a,c){var e=g.getEntry(a);e&&(e.downloadFilePath=c)};window.cacheTimestamp=function(a){if(a=g.getEntry(a))a.timestamp=(new Date).getTime()};window.isReady=!0;return{}});
(function(){function h(c){console.error(c.stack?c.stack:c)}var c=(new Promise(function(c){require(["background/store/fileStore","background/chromeHandler","background/pageAPI"],function(a,e){a.init();c(e)})})).catch(h);(function(){var c=chrome&&chrome.runtime&&chrome.runtime.onConnectExternal&&chrome.runtime.onConnectExternal.addListener;c||console.warn("Missing Chrome Connect API... drive integration wont work");return c})()&&chrome.runtime.onConnectExternal.addListener(function(g){g.onDisconnect.addListener(function(){});
g.onMessage.addListener(function(a){c.then(function(c){c.handleIncomingMsg(g,a)}).catch(h)})});(function(){var c=chrome&&chrome.app&&chrome.app.runtime&&chrome.app.runtime.onLaunched&&chrome.app.runtime.onLaunched.addListener;c||console.warn("Missing ChromeOS Runtime OnLaunched API... opening documents from file browser wont work");return c})()&&chrome.app.runtime.onLaunched.addListener(function(g){"qo_documents"===g.id&&c.then(function(a){a.handleChromeOSFile(g.items)}).catch(h)});chrome.runtime.onMessage.addListener(function(g,
a,e){c.then(function(a){e({newCreate:"Creating new document"});a.handleNewCreate(g.newCreate,g.mimeType)}).catch(h);return!0})})();define("background/backgroundMain",function(){});
